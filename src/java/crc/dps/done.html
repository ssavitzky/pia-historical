<!doctype html public "-//IETF//DTD HTML//EN//2.0">
<html><head>
<title>Done</title>
<link rev="made" href="mailto:steve@rsv.ricoh.com">
</head><body>
<h1>Done</h1>

<blockquote><em>
  This file contains completed tasks. 
</em></blockquote>

See also:
<ul>
  <li> <a href="to-do.html">Pending tasks</a><p>
  <li> <a href="#end">Most Recent Entry</a> (at end.)
</ul>

<ul>
  <li> 1998-06-12 <b>Bug:</b>  true branch of &lt;if&gt; failing. <br>
       (1998-06-11) <br>
       -- This turned out to be due to the fact that, unlike
          <code>java.util.Enumeration</code>, a <code>NodeEnumerator</code>
          skips the first item if you start with <code>getNext</code> instead
          of <code>getFirst</code>.

  <li> 1998-06-12 <b>Check:</b>  Loops with NodeEnumerator <br>
       Loops involving a <code>NodeEnumerator</code> have to
       start with <code>getFirst</code> -- <code>getNext</code> skips the
       first element (unlike a <code>java.util.Enumeration</code>)!
       (1998-06-12)
       
  <li> 1998-06-12 <b>Bug:</b> <code>testHandler</code> <br>
       &lt;test&gt;foo&lt;/test&gt; returns 11 -- extra put, perhaps.
       (1998-06-11) <br>
       -- Missing return, actually, after the test for null attribute list.

  <li> 1998-06-15 <b>Bug:</b> entity substitution <br>
       &amp;date; not getting substituted (i.e. not getting looked up) in
       running text, but substituted correctly in attributes.
       (1998-06-11) <br>
       -- Caused by AbstractHandler not checking for NodeType == ENTITY.

  <li> 1998-06-15 <b>Bug:</b> nested &lt;if&gt; <br>
       The correct branch is selected, but appears twice in the output.
       (1998-06-12) <br>
       -- [copying a node that actually has children should just do a putNode
	  and not recurse.]

  <li> 1998-06-15 <b>Bug:</b> &lt;if text&gt; <br>
       any element in the condition appears to be considered true.
       (1998-06-12) <br>
       -- Incorrect dispatching:  wasn't dispatching if no subtype attr.
          This meant that <code>text</code>, specifically, wasn't handled.

  <li> 1998-06-15 <b>Hole:</b> <code>Filter</code> parse tree output <br> 
       parse tree input &amp; output should use serialized object streams.
       (1998-06-15) <br>
       -- The <code>-n</code> option was added to permit parsing but not
          expanding an input file.

  <li> 1998-06-16 <b>Hole:</b> get/set)IndexValue  <br>
       Should do this using utils in <code>crc.dps.aux.Index</code>.

  <li> 1998-06-17 <b>Hole:</b> <code>crc.dps.active</code> as DOM <br>
       Fairly soon we will want to expand ParseTree* to a full DOM
       implementation, and make it completely independent from the
       implementations in <code>crc.dom</code>. <br>
       -- completed 6/17 with some bugs remaining, and no impl. of Document.

  <li> 1998-06-17 <b>Impr:</b> <code>AbstractActiveNode</code> deepCopy <br>
       <code>deepCopy</code> should use a method in the abstract parent to
       copy the children.  The reason it doesn't now is that the existing
       method meant for that purpose is in <code>crc.dom.AbstractNode</code>,
       and doesn't constructive active nodes.  It uses <code>clone</code>, and
       it's broken. <br>
       -- fixed with the re-parenting of the <code>ParseTree</code> classes.

  <li> 1998-06-18 <b>Bug:</b> Bugs with independent ParseTree DOM <br>
       After making ParseTreeElement, etc. descend from ParseTreeNode, empty
       elements are not identified, and &lt;test match&gt; produces odd
       results.  Start tags are getting replaced by end tags in some cases!
       (1998-06-17) <br>
       -- <code>isEmptyElement</code> is never getting set.  Do it in
	  <code>AbstractParser</code>'s <code>createActiveElement</code> and
	  <code>correctActiveElement</code>. 

  <li> 1998-06-18 <b>Impr:</b>  <code>EntityHandler</code> needed <br>
       having a specific handler for expandable entities would help a lot.
       It is expected that this would result in a substantial speedup.
       (1998-06-15) <br>
       -- In all about 5 seconds (15%) off parsing from other improvements,
          and 6 off processing from this one.

  <li> 1998-06-18 <b>Impr:</b>  <code>TextHandler</code> needed <br>
       -- no noticable speed improvement.

  <li> 1998-06-18 <b>Impr:</b>  Remove debugging code from inner loops. <br>
       -- Removing debug calls in <code>processNode</code> and
	  <code>additionalAction</code> saves another 30%! (sick.)

  <li> 1998-06-18 <b>Hole:</b> PUT_NODE action code needed <br>
       Passive node with no children -- just put it. 
       (1998-06-18) <br>

  <li> 1998-06-18 <b>Hole:</b> ParseTreeNode must allow extra action on
       addChild, insertBefore, and initialization. <br>
       This will allow insertion methods to be extended.  Only the protected
       dispatch method <code>doInsert</code> needs to be extended.
       (1998-06-19) <br>

  <li> 1998-06-18 <b>Hole:</b> Tagset and Handler must be generic. <br>
       Sometimes we may need them to be elements, sometimes declarations.
       (1998-06-18) <br>

  <li> 1998-06-18 <b>Hole:</b> Tagset and EntityTable must be lists as
       well. <br> 
       The items defined must be their content, not their attributes.
       This will greatly simplify the loading of tagsets, DTD's, etc.
       (1998-06-19) <br>

  <li> 1998-06-22 <b>Impr:</b> Define syntax flags in
       <code>crc.dps.Syntax</code> <br> 
       (They are currently defined in BasicTagset, which makes them mostly
       inaccessible.)
       (1998-06-18) <br>

  <li> 1998-06-23 <b>Bug:</b> entities and attributes broken <br>
       Something broke when we went to values not being children.  Values are
       set, but cannot be retreived.  Several places seem to still be using
       getChildren instead of getValue.
       (1998-06-23) <br>
       -- tested old value for null instead of new, in <code>putValue</code>.

  <li> 1998-06-23 <b>Bug:</b> &lt;test match&gt; produces odd results.  <br>
       &lt;test match&gt; produces odd results sometimes in <code>t2.if</code>
       (1998-06-17) <br>
       -- due to attributes being broken, of course.

  <li> 1998-06-24 <b>Bug:</b> Nested &lt;if&gt; loses &lt;then&gt; content. <br>
       The children of a second-level then are getting lost instead of copied.
       (1998-06-23) <br>
       -- declaring <code>int action</code> instead of
          <code>int actionCode</code>

  <li> 1998-06-24 <b>Impr:</b> &lt;test&gt; should be ended by &lt;then&gt; <br>
       (1998-06-18) <br>

  <li> <b>Check:</b>  copying <br>
       Non-processed parse trees (e.g. &lt;else&gt;) should never be copied.
       Copying should use <code>putNode</code> if the node actually has
       children; recursion if the children are unparsed.
       (1998-06-15)<br>

  <li> 1998-06-25 <b>Impr:</b> Dispatching: create fewer instances <br>
       Dispatching should create a new handler instance only when necessary;
       normally it should cache instances with standard attributes.
       (1998-06-15) <br>
       -- <code>handle(<em>element</em>)</code> method in place; usage needs
	  to be checked.

  <li> 1998-06-25 <b>Query:</b>  &lt;test zero&gt; non-number&lt;/&gt; = ?<br>
       Not clear whether non-numerics should test as zero or not.  The most
       consistant thing would be for whitespace to return <code>true</code>,
       non-whitespace to return <code>false</code>.
       (1998-06-15)
       -- At the moment, whitespace is zero.
       
  <li> 1998-06-26 <b>Bug:</b> Empty actor def's fail. <br>
       (1998-06-25) <br>
       -- Empty def. handled by defining as null string. 

  <li> 1998-06-27 <b>Bug:</b> Actors defined inside &lt;if&gt; fail. <br>
       One can no longer expect an actor defined inside quotes to be visible
       there (because of pre-parsing), but it <em>should</em> be visible
       <em>outside</em>. 
       (1998-06-25) <br>
       -- <code>ParseTreeText</code> wasn't getting cloned correctly; a
	  hangover from when it descended from BasicText.

  <li> 1998-06-27 <b>Bug:</b> Parsing:  Lots of trouble with implicit end.<br>
       &lt;tr&gt; ends the previous &lt;th&gt;, but neither the expected
       &lt;/tr&gt; nor the &lt;tr&gt; show up.  An entity before an inserted
       &lt;/td&gt; also causes havoc -- it turns into a comment! (probably bad
       node type).  Missing &lt;/then&gt; also loses.
       (1998-06-26) <br>
       -- Not putting token back into <code>next</code> in
	  <code>advanceParser</code>.

  <li> 1998-06-27 <b>Goal:</b> (7-1) Able to process slides <br>
       Be able to process <code>.../Reviews/slides-199807.html</code> in time
       to show it at the review.  Requires &lt;actor&gt;
       (1998-06-24) <br>

</ul>
<a name="end">End of list.</a>
<hr>
<b>Copyright &copy; 1998 Ricoh Silicon Valley</b><br>
<b>$Id$</b><br>
<address><a href="http://rsv.ricoh.com/~steve/"
         >Stephen R. Savitzky</a> &lt;<a href="mailto:steve@rsv.ricoh.com"
         >steve@rsv.ricoh.com</a>&gt;</address>
</body></html>
