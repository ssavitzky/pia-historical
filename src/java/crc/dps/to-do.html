<!doctype html public "-//IETF//DTD HTML//EN//2.0">
<html><head>
<title>DPS: To-Do List</title>
<link rev="made" href="mailto:steve@rsv.ricoh.com">
</head><body>
<h1>To-Do List</h1>

<blockquote><em>
  This file contains pending tasks for the DPS system. 
</em></blockquote>

See also:
<ul>
  <li> <a href="done.html">Completed tasks</a>
  <li> <a href="#Keywords">Keywords</a>
  <li> <a href="#end">Oldest Entry</a> (at end.)
</ul>

<ol>
  <li> <b>Note:</b> The official package name is <code>org.w3c.dom</code> <p>
       Not clear at this point exactly what use to make of this.
       (1998-07-16)<br>

  <li> <b>Hole:</b> PI comments <br>
       Comments of the form <code>&lt;?-- text ?&gt;</code> should be discarded
       by the processor rather than being copied.
       (1998-07-15)<br>

  <li> <b>Hole:</b> PI and declaration actions <br>
       Need to assign separate actions to PI's and declarations by name.
       As a desirable side effect, this will allow loading tagsets and
       interpreting DTD's.  Strictly speaking the name is the name of an
       application, not of an operation.
       (1998-07-15)<br>
       <p>

  <li> <b>Bug:</b> PI's need to end in `<code>?&gt;</code>' <br>
       present parser ends them with `<code>&gt;</code>'.
       (1998-07-16)<br>

  <li> <b>Bug:</b> XML names include extra characters. <br>
       XML names may contain `<code>"." | "-" | "_" | ":"</code>' in addition
       to anything Unicode defines as a letter, combining character, or
       extender.  Colon is the namespace delimiter, and the prefix "xml" is
       reserved.  HTML4.0 has these, too.
       (1998-07-16)<br>

  <li> <b>Bug:</b> Node construction <em>must</em> set handler. <br>
       All new nodes have to have their handler set properly; this means
       replacing almost all <code>new ParseTree<em>Whatever</em></code> with
       <code>create<em>Whatever</em></code> operations on the current
       Tagset. Easily enforced by eliminating constructors without handlers.
       (1998-07-10) <br>

  <li> <b>Bug:</b> ProcessedContent doesn't do insertions. <br>
       Neither does its predecessor, InterFormContent.
       (1998-07-08) <br>

  <li> <b>Hole:</b> Need <code>lookupFile(fn, write)</code> in TopContext. <br>
       (1998-07-08) <br>

  <li> <b>Hole:</b> need HookProcessor to run Agent hooks. <br>
       (1998-07-08) <br>

  <li> <b>Impr:</b> Add ActiveNode operations to <code>Input</code>, etc. <br>
       Fully supporting <code>ActiveNode</code> as well as <code>Node</code>
       everywhere in the DPS would give faster, simpler code.  It is already
       impossible to use ordinary DOM Nodes in a Processor.
       (1998-07-07) <br>

  <li> <b>Impr:</b> Parser should put text in <code>next</code> <br>
       (instead of putting it in <code>nextText</code> and increasing the
       number of tests per token).
       (1998-06-29) <br>

  <li> <b>Hole:</b> Ought to have <code>NamedChildList</code> <br>
       for the children of things like <code>EntityTable</code> and
       <code>Tagset</code>.
       (1998-06-29) <br>

  <li> <b>Bug:</b> appending to undefined entity fails. <br>
       &lt;set name=foo&gt;&lt;get name=foo&gt;...&lt;/set&gt; leaves
       <code>foo</code> undefined.  There must be an explanation...
       (1998-06-26) <br>

  <li> <b>Bug:</b> must replaceChild when redefining entity or handler <br>
       BasicTagset and BasicEntityTable have to do a replaceChild when
       replacing a binding.
       (1998-06-26) <br>

  <li> <b>Hole:</b> Must define tags at parse time to cache trees. <br>
       In order to parse correctly, you have to have the whole DTD in
       advance.  Yet another argument for the position that a tagset is a
       DTD. 
       (1998-06-25) <br>

  <li> <b>Impr:</b> Upgrade <code>handle</code> methods. <br>
       The static <code>handle(<em>element</em>)</code> methods in handler
       subclasses should pick up a static instance if possible, rather than
       just calling <code>new</code>.  (See also ''Impr'' of 1998-06-15.)
       (1998-06-25) <br>

  <li> <b>Goal:</b> (8-1) Run Most Agents <br>
       Be able to run all of the agents in (my) daily use (i.e. history, etc.,
       but not the wacko stuff in the form server).
       (1998-06-24) <br>

  <li> <b>Bug:</b> Flag unimplemented legacy options. <br>
       Unimplemented legacy options in &lt;get&gt; etc. have to be brought to
       the user's attention with error messages.  Requires a mode flag or,
       better, dispatching via the legacy handler first.
       (1998-06-24) <br>
       -- Note that static caching allows the correct handler class to be
	  loaded without having to hack the search order in
	  <code>loadHandler</code>. 

  <li> <b>Impr:</b> Character Entities should be defined in tagset <br>
       Should have defined value; copy value into references to short-circuit
       lookup.  <code>TextUtil.expandCharacterEntities</code> can then make
       use of this.
       (1998-06-22) <br>

  <li> <b>Hole:</b> <code>ToParseTree</code> should take a tagset <br>
       Tagset is needed to attach actions to constructed nodes.
       (1998-06-22) <br>

  <li> <b>Impr:</b> Tagset should extend EntityTable, or reference one. <br>
       This will make it easier to define entities and tags in the same DTD.
       (1998-06-19) <br>

  <li> <b>Hole:</b> Character entity class, handler <br>
       Having a separate node class and handler class for character entities
       would simplify inserting and expanding them.  Would break some legacy
       code, though.
       (1998-06-19) <br>

  <li> <b>Impr:</b> PUT_VALUE action code needed <br>
       Get a value for the node and put that.  Needs a corresponding
       <code>putValue(<em>node, context, output</em>)</code> in Action; the
       default should be to copy the node.  Could be used for entity expansion
       in attributes.
       (1998-06-18) <br>

  <li> <b>Hole:</b> <code>ParseTreeDocument</code>, DTD, &amp; XML nodes. <br>
       ...are still unimplemented. 
       (1998-06-18) <br>

  <li> <b>Hole:</b> PIA namespaces and data types <br>
       During the transition Agent and Transaction need to be able to
       return both SGML and DOM data as needed.  Fortunately many of the
       namespaces contain only strings; it's really only hooks that differ.
       (1998-06-18) <br>
       -- Part of the solution is making Agent and Transaction implement an
	  interface with methods like <code>getObjectAt</code> and
	  <code>getStringAt</code>, etc. instead of the Attr interface.

  <li> <b>Prop:</b> New InterForm extensions (?). <br>
       (of course, the really obvious one is <code>.dpml</code> -- Document
       Processing Markup Language. (6-29)
       <dl compact>
	 <dt> .mh
	 <dd> ``Meta-HTML'' -- resulting in a MIME type of
	      <code>text/html</code> 
	 <dt> .mx
	 <dd> ``Meta-XML'' -- resulting in a MIME type appropriate for XML.
	 <dt> .md
	 <dd> ``Meta-Data'' -- the MIME type is computed by the file
	 <dt> .mt
	 <dd> ``Meta-Transaction'' -- the entire headers are computed.
       </dl>
       (1998-06-18) <br>

  <li> <b>Impr:</b> ISO 8601 date representation (dashes) <br>
       See <a href="http://www.ft.uni-erlangen.de/~mskuhn/iso-time.html">this
       summary</a>.  The main things needing fixing are the entity table
       initialization, and dates as presented by the History agent's hook.
       (1998-06-18) <br>
       -- Should add timezone and UTC time/date as well.

  <li> <b>Impr:</b> Entities need to be initialized by the Tagset. <br>
       The justification for this is that strictly speaking entities are
       defined in the DTD.
       (1998-06-18) <br>

  <li> <b>Impr:</b> Caching for subProcess stack <br>
       ContextStack should have a <code>free</code> link to a free
       sub-processor, to be used instead of allocating one.
       (1998-06-18) <br>
       -- <code>subProcess</code> clears <code>free</code>; caller does
	  <code>p.cleanup()</code> when finished to restore it.

  <li> <b>Hole:</b> NamedNodeList wrapping a Table <br>
       Want to be able to wrap a Table as a NamedNodeList.  This will provide
       the DPS equivalent of <code>crc.sgml.AttrWrap</code>.
       (1998-06-16) <br>

  <li> <b>Impr:</b> tag handler classes need loader methods <br>
       Tagset shouldn't have to know how to load classes for handlers.  Having
       static methods for this would allow tag handlers to manage their own
       name spaces. 
       (1998-06-16) <br>

  <li> <b>Impr:</b> <code>Filter</code> parse tree input <br> 
       Filter should  be able to read a serialized parse tree.
       (1998-06-15) <br>
       -- It should do so if the input file ends in ``<code>.obj</code>''.
       
  <li> <b>Hole:</b> Legacy Handlers <br>
       <code>cd <a href="../interform/handle">../interform/handle</a>;
       make dps-check </code> for report.
       (1998-06-15) <br>

  <li> <b>Hole:</b> New Handlers <br>
       A significant amount of language design is needed here.
       <br>
       <b>done:</b> subst if else then elsf test get set 

  <li> <b>Check:</b> attribute and tag case sensitivity <br>
       Nothing is careful about cannonical attribute and tag names yet.

  <li> <b>Impr:</b> <code>NamedActiveNode</code> values <br>
       Named nodes should have defined, assigned and default values. Only
       defined value should be the children; it would be used for the
       <em>definition</em> of a name.  Want to be able to share assigned
       values; the NodeList of an assigned value would be a copy (just like we
       presently do for attribute lists, and for the same reason). 

  <li> <b>Hole:</b> <code>BasicParser</code>: content parse control <br>
       Currently Parser does not check syntax of current node to see whether
       to look for entities or elements in the content.
       <br>

  <li> <b>Hole:</b> <code>SGMLParser</code>: content models <br>
       Currently Parsers and Tagsets do not have any notion of content model.
       <br>

  <li> <b>Impr:</b> <code>ParseTreeElement</code> hasActiveAttributes <br>
       ParseTreeElement should keep information about whether any of its
       attributes contain entities that need to be expanded.  Should be much
       faster, since most don't and it's known at parse time. <p>

       The other possibility is lazy evaluation -- don't even look at them
       until they're needed when converting an attribute's value to a string.<p>
       <br>

  <li> <b>Wish:</b> <code>toNextNode</code>  <br>
       Might want flag in Input's that tells whether the current node has been
       processed yet.  (really relevant only for toNextNode, to keep track of
       whether we've enumerated the children yet)
       <br>

  <li> <b>Wish:</b> <code>ParseTreeIterator</code> <br>
       We will want a ParseTreeIterator that implements both Input and
       Output (and of course TreeIterator).  The main use would be
       constructing an node and then processing it.
       <br>

  <li> <b>Wish:</b> <code>ParseTreeGenericNode</code> <br>
       Eventually there should be a ParseTreeGenericNode, basically Token, so
       that we can build trees with arbitrary node types.
       <br>
</ol>

<a name="end">(End of list)</a>

<h2><a name="Keywords">Description of Keywords</a></h2>

(Listed in order of decreasing urgency.)

<dl>
  <dt> <b>Bug</b>
  <dd> A (typically small) problem with a simple, unambiguous description of
       its symptoms.
  <dt> <b>Hole</b>
  <dd> A piece of missing, but important, functionality.
  <dt> <b>Goal</b>
  <dd> A target capability (includes a date)
  <dt> <b>Check</b>
  <dd> Something to check for; a potential stumbling block or place where the
       implementor may have cut corners in the heat of the moment.  For
       example, Y2K problems.
  <dt> <b>Impr</b>ovement
  <dd> A desirable improvement.
  <dt> <b>Prop</b>osal
  <dd> A proposal that will need to be discussed further.
  <dt> <b>Wish</b>
  <dd> A desired improvement of low priority.
</dl>

<hr>
<b>Copyright &copy; 1998 Ricoh Silicon Valley</b><br>
<b>$Id$</b><br>
<address><a href="http://rsv.ricoh.com/~steve/"
         >Stephen R. Savitzky</a> &lt;<a href="mailto:steve@rsv.ricoh.com"
         >steve@rsv.ricoh.com</a>&gt;</address>
</body></html>
