<!doctype html system "html.dtd">
<html><head>
<title>PIA User's Manual</title>
<link rev="made" href="mailto:steve@crc.ricoh.com"></link>
</head><body>
<h1>PIA User's Manual</h1>

<blockquote><em>
  This document is a user's manual for the Personal Information Agency.  It is
  an active document, written on the assumption that it is being viewed
  through a PIA.  If you're reading this online and don't have a PIA running,
  see the first section, ``Getting Started,'' and browse to
  &lt;http://Agency/Doc/Manuals/User&gt;, otherwise many of the example links
  won't work.<p>

  If you have no idea why you would want a PIA in the first place, see this
  <cite><a href="../../intro.html">Introduction to PIA's</a></cite>.
</em></blockquote>

<h2>Getting Started</h2>

<h3>Running the Agency</h3>

If you have a Unix or Linux machine on your desktop, aren't sharing it with
anyone, and don't have a personal copy in your home directory, give the
command:

<pre>
   pia&amp;
</pre>

in an <code>xterm</code> window.  If you're using <code>telnet</code> to
connect to a shared server, use

<pre>
  pia -P&amp;
</pre>

If you have made a personal copy in your home directory, use

<pre>
  ~/pia/bin/pia&amp;
</pre>

Take note of the host name and port number the PIA prints out when it starts
up. <p>


<h3>Running a Browser</h3>

If you're using Netscape, go to the ``proxies'' tab under ``network options.''
Click on ``manual proxy configuration'' and ``view'', and set the host name
and port to the ones the PIA printed out when it started.  Browse to the
Agency's home page:
<code>&lt;<a href="http://Agency/">http://Agency/</a></code>&gt;.<p> 

Many Unix browsers, such as Chimera and Arena, take their proxies from
environment variables.  In this case you can have the PIA start your browser:

<pre>
  pia -c "chimera http://Agency/"&amp;
</pre>

The host ``<code>Agency</code>'' is shorthand for the hostname and port number
of the agency your browser is using as a proxy.  It lets you refer to your
PIA in documents, no matter what computer you're using.  The PIA will
automatically tell your browser what the <em>real</em> host and port are.  If
it didn't, things would get very confused if you decided to look at someone
else's, or a printer's, PIA. <p>


<h2>Normal Operation</h2>

<h3>What's it Doing?</h3>


<h3>The PIA as Proxy</h3>

<h3>The PIA as Server</h3>


<h2>Command-Line Options</h2>
<dl>
  <dt> <code>-root <em>PIA_DIR</em></code>
  <dd> This is normally
       the place where the PIA is installed; if you have your own copy it is
       <code>~/pia</code>, otherwise it's probably
       <code>/usr/local/pia</code>.  It is accessible in the pia as the DOFS
       <code><a href="/PIA/">/PIA/</a></code>.
  <dt> <code>-u <em>USR_DIR</em></code>
  <dd> Set the <code>USR_DIR</code> environment variable.  This is normally
       <code>~/.pia</code>, and is accessible in the pia as the DOFS <code><a
       href="/My/">/My/</a></code>.  It's where the PIA keeps your
       customizations, history, and private agent state.
  <dt> <code>-port <em>[port_number]</em></code>
  <dd> Specifies the port on which the agency is listening for connections.
       This is normally 8888.
  <dt> <code>-port</code>
  <dd> Listen on port =  8000 + your user ID, in case you're sharing a
       computer with other people.
       <p>
  <dt> <code>-p <em>configurationfile</em></code>
  <dd> The configuration file for the PIA; please specify the complete path.  The
       default file is stored under pia/Config/pia.props.  You can create a
       customizable copy in your home directory under ~./pia with the command
<p>
       pia/bin/makeconfig
       
  <dt> <code>-q</code>
  <dd> Be quiet -- only print out error messages.
  <dt> <code>-v</code>
  <dd> Be verbose.  Print out a little more information than usual.
  <dt> <code>-d</code>
  <dd> Debugging -- print out <em>lots</em> of stuff.  If <em>n</em> is 2 or
       more, print out even more information, from the InterForm parser.
       Debugging printout makes the Agency run <em>very</em> slowly.
  <dt> <code>-?</code>
  <dd> Print out command line options
</dl>

<h2>Agents</h2>

By convention, ``agents'' that have capitalized names are Document-Oriented
File Systems that contain ordinary documents; agents with lowercase names are
``ordinary'' agents that consist of <em>active</em> documents.<p>

Agents have both a ``home page'' (which you get to via a URL that doesn't
end in a ``<code>/</code>'' character, like this: <code><a
href="/Agency">/Agency</a></code>), and an ``index page''(which you get to via
a URL ending in ``<code>/</code>'', like this: <code><a
href="/Agency">/Agency/</a></code>).  Usually the index will just tell you
what ``sub-agents,'' if any, are available, and the home page is where you go
to find out about the agent's functions and control its operations.<p>

The Agency as a whole <em>also</em> has a home page.<p>

It is usually possible to use an agent from ``outside'' an agency, by simply
giving its url.  You can send someone a link to one of your agents' pages, for
example a page in your hotlist, in order to share information.  Agents that
write files or control the Agency's operation are written so as to only work
when the Agency is being used as a proxy. <p>

<h3>Agency</h3>

The <code><a href="/Agency">Agency</a></code> agent, as you might expect, is
the agent that you use to control the Agency itself--it lets you install and
delete agents, restart or shut down the Agency, even shut down your 
computer.  It is used <em>inside</em> the Agency for many purposes, including
installing and removing agents.  It contains many useful InterForms:<p>

<ul>
  <li> <a href="/Agency/agents.if">list running agents</a>
  <li> <a href="/Agency/installers.if">install new agents</a>
  <li> <a href="/Agency/entities.if">list defined entities</a>
  <li> <a href="/Agency/options.if">view/change options</a>
  <li> <a href="/Agency/debug.if">toggle debugging</a> (currently 
       <code>off</code> );
  <li> <a href="/Agency/remove_agent.if"> remove agent</a>
  <li> <a href="/Agency/shutdown.if">Shut down the computer</a>
</ul>

The <a href="/Agency/installers.if">install new agents</a> form is
particularly useful if you want to try out unfamiliar agents.  At the moment
the only way to get up-to-date documentation on an agent is from its home
page, which is only useable after you install it.<p>


The Agency's top-level home page is located inside the <code>Agency</code>
agent, in the file <code><a
href="/Agency/ROOTindex.if">/Agency/ROOTindex.if</a></code>. <p>

<h3>DOFS</h3>

The <code><a href="/DOFS">DOFS</a></code> agent contains the InterForms for
managing the various Document-Oriented File System agents.  Its <a
href="/DOFS/">index page</a> gives you a list of all installed DOFS's, while
its <a href="/DOFS">home page</a> contains a form for installing a new DOFS.<p>

Document-Oriented File Systems are very much like ordinary Web server document
directories.  The main difference is that the <code>index.html</code> file, if
there is one, only replaces the directory listing if you're not using the
Agency as a proxy.  This means that you can provide different behavior
(including the equivalent of a ``keep out'' sign) for yourself and for other
people to whom you might have given access to your Agency.<p>

Also DOFS agents, like other agents, have separate index and home pages.  The
<em>home page</em> (without a trailing slash) gives information <em>about</em>
the DOFS, for example where its files are located.  It also contains a
form that you can paste into your personal start-up file.<p>

Note that the Agency will not execute InterForm files in a DOFS.  This means
that you can use the <code><a href="/PIA/">/PIA/</a></code> DOFS to look at
the source code for an InterForm.<p>

<h3>Spies</h3>

There are two major ``spy'' agents: the <code><a href="/Cia">Cia</a></code>
and the <code><a href="/Fbi">Fbi</a></code>.  (These correspond to two of the
major espionage agencies of the US federal government; at some point we might
add an NSA as well.  Of course in the PIA we have to call them agents rather
than agencies.  Oh, well.)<p>

The ``spy'' agents each look for a particular type of transaction and extract
information from it.  The CIA looks at transactions that go <em>outside</em>
the Agency, while the FBI looks at transactions directed at agents.<p>

Each spy agent can be configured to put a small ``toolbar'' on top of each
HTML page it examines.  The toolbar on pages from <em>inside</em> the Agency
start with a "PIA" logo, while those from <em>outside</em> just have the
pentagonal spiderweb logo.  In both cases the logo is a link to the Agency
home page.<p>

The FBI's toolbar has a link to the home page of the agent that generated the
page you're looking at, and a link to the source code of the corresponding
InterForm.  The CIA's toolbar tells you the page's cache status and gives you
a button for adding it to the hotlist.  Both give you the current date and
time; the date is a link to the daily history list, and the time is a link to
the current document information.<p>

The history information is updated only by the CIA, not the FBI, so it only
applies to documents coming from <em>outside</em> the agency.  This can be
useful--you can browse to a page and do a lot of work in the agency, for
example checking your history and hotlist, without losing your place.<p>


<h3>History</h3>

Eventually the <code><a href="/History">History</a></code> agent will let you
do searches in your history list, view it in various ways, and so on.  For the
moment it just keeps a file for every day (the name is
<code>/My/History/<em>yymmdd</em>.html</code>; it really ought to be
<code>/My/History/<em>yyyy</em>/<em>mmdd</em>.html</code>) that lists every
URL you visit outside the Agency itself, together with the time you went
there.<p>


<h3>Cache</h3>

<dl>
  <dt> <b>Note:</b>
  <dd> This agent is currently under construction, and does not yet
       operate exactly as described here.
</dl>

The <code><a href="/Cache">Cache</a></code> agent keeps a copy of every page
you browse to.  (You will eventually be able to tell it not to keep a copy of
pages on your local system, and how long to retain the pages it <em>does</em>
keep.)  From then on, whenever you browse to a page you've been to before you
get the copy that was in the cache, and a ``C'' and ``F'' logo will appear in
the CIA's toolbar.  <p>

Clicking on the ``C'' logo will get you to a cache control page that gives you
more information about the page and lets you pre-fetch pages it points to, or
re-load it at a specified time or interval.  This can be handy for things that
change daily, like the news, the stock quotes, the weather map, or the Dilbert
cartoon.<p>

Clicking on the ``F'' logo will ``freshen'' the cached copy of the page by
``fetching'' it from its home server.  You can program the cache to do this
automatically if the page appears to be too old.<p>

Most browsers and caching proxy servers will refuse to cache a page that
appears to be the result of a search or form submission, or that the server
says not to cache.  The Cache agent <em>will</em> save them, but under a
different name so that you have a record but still see the newest version.
When this happens you won't see the ``F'' logo, and there will be a ``U''
instead of the ``C''.<p>


<h3>Hotlist</h3>

<dl>
  <dt> <b>Note:</b>
  <dd> This agent is currently under construction, and does not yet
       operate exactly as described here.  (As a matter of fact the Hotlist
       agent doesn't exist at all, <em>yet!</em>)
</dl>

The <code><a href="/Hotlist">Hotlist</a></code> agent is really more than
that--it lets you attach keywords and a short description to a page, locate
pages by both keyword and description, and gather annotated links into new
documents which you can then export to, for example, your public Web pages.
This is not the same as a possible ``annotation'' agent, however, which would
let you put annotation <em>into</em> your own or other peoples' pages.<p>

The hotlist agent puts an hollow yellow rectangle icon into the CIA or FBI
toolbar (or ``[++]'' for text browsers; ``++'' is the C operator that means
``add one'') on pages that are not yet in the hotlist.  It puts a solid
rectangle (or ``[**]'') on pages that <em>are</em> in the hotlist.  Both icons
are links to the hotlist data for the page you are looking at.  The icon is
meant to look like a yellow sticky note, of the sort that people sometimes use
for bookmarks and annotations.<p>

The hotlist agent lets you keep a single hotlist that you can make entries in
from any browser, anywhere in the world where you can connect to your personal
Agency.  Of course you may want to have two agencies, say at home and at work;
it will also be possible to automatically e-mail hotlist entries to your
``other'' Agency.<p>


<h3>Logo</h3>

The <code><a href="/Logo">Logo</a></code> agent is responsible for making
those cute little pentagon-based logos you see all over the Agency's pages.
It has many options (detailed on its <a href="/Logo">home page</a>), but
basically it pretends to have a lot of files called
<code><em>tttthh</em>.gif</code>, where <code><em>tttt</em></code> is a
``type'' like <code>pia</code> or <code>pent</code>, and
<code><em>hh</em></code> is a height, in pixels.  The width is calculated
automatically.  Anything with  <em>height &gt; 20</em> gets a 1-pixel-wide
border. <p>

<blockquote>
  By the way, it's perfectly acceptable for an agent's directory to contain
  ordinary HTML files, images, data, and even programs as well as
  InterForms. For example, the <code><a href="/Printer">Printer</a></code>
  agent's printer icon, and the <code><a href="/Hotlist">Hotlist</a></code>
  agent's ``postit-note'' icon, are both ordinary <code>.gif</code> files in
  the agent's directories.
</blockquote>

<!-- === -->

<hr>
<h2>Customization</h2>

<h3>Your Personal PIA Directory</h3>

The  directory <code>.pia</code> in your home directory contains your personal
PIA information:  your agency startup file, customized InterForms, your cache
and history files, and so on.  It is accessible as the DOFS agent
<code><a href="/My/">/My/</a></code>.<p>

This directory contains a subdirectory for every agent that needs to store
personal data.  Your history, for example, is in <code><a
href="/My/History/">/My/History/</a></code>. Any sub-directory called
``<code>spool</code>'' is being used for temporary files, and it's safe to
clean it out every so often if you start running out of memory.<p>

You can make your own ``home page'' in <code><a
href="/My/HEADER.html">/My/HEADER.html</a></code>; in general a file called
<code>HEADER</code> or <code>HEADER.html</code> is inserted in front of the
directory listing.  If you supply a <code>index.html</code> file, <em>you</em>
will still see the complete directory listing, but anyone else will just see
the index file.  Most people will want to start up with a different home page
from their usual one if they're using a PIA.<p>


<h3>Your Customized InterForms</h3>

The directory <code><a href="/My/Agents/">/My/Agents/</a></code> contains your
customized InterForms.  Any file in it replaces the corresponding file in
<code><a href="/PIA/Agents/">/PIA/Agents/</a></code>.<p>

This lets you easily customize the appearance and behavior of the various
agents.  You can even add your <em>own</em>, private agents by creating
subdirectories in <code><a href="/My/Agents/">/My/Agents/</a></code>.<p>

At some point we may even have a ``<b>customize</b>'' button on every
InterForm, that copies it to your private InterForm directory.<p>


<h3>Your Personal Startup File</h3>

The file <code><a href="/PIA/Agents/Agency/START-UP.html"
>/PIA/Agents/Agency/START-UP.html</a></code>, and your personal version in
<code><a href="/My/Agents/Agency/START-UP.html"
>/My/Agents/Agency/START-UP.html</a></code>, are used (not surprisingly) when
the agency starts up, to install an initial set of agents.  It consists of a
set of HTML &lt;form&gt; tags; when the agency starts, each form is
automatically submitted.<p>

You can write this file automatically by clicking a link on the <code><a
href="/Agency">Agency</a></code> agent's home page; it will save your current
agent configuration.  Some people like to start up with the same configuration
each time and install additional agents as needed.  You can find installation
forms for most agents in <code><a
href="/Agency/installers.if">/Agency/installers.if</a></code>, which is
accessible from the <code><a href="/Agency">Agency</a></code> agent's home
page.<p>

Configuring an agent, especially someone else's, is rather tricky, so the best
way to create your <code><a href="/My/Agents/Agency/START-UP.html"
>START-UP.html</a></code> file is by saving a configuration you like.  You can
add to it later by copying forms out of <code><a
href="/Agency/installers.if">/Agency/installers.if</a></code>.<p>

At some point we will make a collection of people's personal startup
configurations and customizations (as much as they feel like making public),
probably in <code><a
href="/PIA/Contrib/Config/">/PIA/Contrib/Config/</a></code>.  This will be a
good place to go for new ideas about using your PIA.<p>


<hr>
<h2>Peripheral Agencies</h2>

If an Agency is started by the special user <code>pia</code>, it configures
itself as a ``Peripheral Interface Agency,'' on the assumption that it's being
used to control some peripheral device such as a printer, and also that it
might be being shared among more than one ``real'' user.  This section will
discuss <em>using</em> such a web-enabled appliance.  See the <a
href="../Install/">Installation Manual</a> for information about setting one
up. <p>

<blockquote>
  Many peripheral agents, for example the <code><a
  href="/Printer">Printer</a></code> agent, can be installed on your personal
  agency and configured to use devices attached to your PC or available over
  the network.  We're <em>not</em> talking about that here.
</blockquote>


At the moment, you have to re-set your browser's HTTP proxy in order to use
most features of a peripheral agency.  In the near future, though, there will
be a <code><a href="/Proxy">Proxy</a></code> agent that lets you change your
<em>personal agency's</em> proxy.<p>


<!-- === -->


<hr>
<b>$Id$</b><br>
<!-- hhmts start -->
Last modified: Wed Jul 23 14:17:07 1997
<!-- hhmts end -->
<p>
<address><a href="http://www.crc.ricoh.com/people/steve/steve.html"
         >Stephen R. Savitzky</a> &lt;<a href="mailto:steve@crc.ricoh.com"
         >steve@crc.ricoh.com</a>&gt;</address>
</body></html>
