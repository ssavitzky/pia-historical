<!doctype html system "html.dtd">
<html><head>
<title>PIA InterForm Manual</title>
<link rev="made" href="mailto:steve@crc.ricoh.com"></link>
</head><body>
<h1>PIA InterForm Manual</h1>

<blockquote><em>
  This document is a user's manual for the Personal Information Agency's
  InterForm (Interactive/Interpreted Form) system.
  Eventually it will be an active document, written on the assumption that it
  is being viewed through a PIA.
</em></blockquote>

<h2>Introduction:  What's an InterForm?</h2>

An InterForm is a HTML document that contains some tags that a PIA can
``interpret.''  You can think of an InterForm as an HTML form that doesn't
need a corresponding CGI script to handle it.  You can also think of it as
an ``active'' document that is run through a special-purpose formatter.<p>

Because the extra tags follow strict SGML syntax conventions, InterForms can
be edited with any text editor, or any HTML editor that lets you use new or
non-standard tags, or any SGML editor (at least when we create an extended
DTD).<p> 

We hope that authors will find InterForms to be as easy to use as
word-processor macros or text-formatting style sheets.  Programmers will find
that, in spite of their unfamiliar syntax, InterForms have all the power of
any modern object-based language.<p>

<h3>InterForm Data Structures</h3>

The key idea behind InterForms is <em>computing with documents</em>, so data
in the InterForm system is simply a piece of a document.  Markup is explicitly
included in this, and HTML ``data structures'' are used as much as
possible.<p>

In particular, HTML lists (&lt;ul&gt; and &lt;ol&gt;) are used as lists or
arrays.  Definition Lists (&lt;dl&gt;) are used as ``associative arrays,''
in which you can look up a ``term'' (&lt;dt&gt;) and get the corresponding
data (&lt;dd&gt;).  Similarly, tables (&lt;table&gt;) can be used like
database tables.   This makes it easy to take parts of documents and use them
as data, something most existing systems are not very good at.<p>

In general, all data in an InterForm is in the form of SGML
``<dfn>elements</dfn>.''  An element is either a string of characters, or a
compound object consisting of a <em>start tag</em> and <em>end tag</em>
enclosing some <em>content</em> elements between them.  The element may also
have some named <dfn>attributes</dfn>; attributes and their associated values
appear in the element's start tag.<p>


<h3>Entities</h3>

Entities (those things like <code>&amp;copy;</code> that a browser displays as
special characters) are used as variables or macros--they can be defined (and
redefined) and later ``expanded'' (replaced by their definition).  As you
might expect, a definition list can be used for this.  Entities can also be
used as ``iteration variables''--you can repeat a piece of text for every item
in a list, with the <code>&amp;li;</code> entity replaced by each list item in
turn.<p>

<h3>Actors</h3>

Finally, new, <em>active</em> ``elements'' can be defined, complete with their
own start tag, end tag, attributes, and content.  Whenever such an element
appears in a document, a corresponding piece of InterForm data called an
``<dfn>actor</dfn>'' is expanded, with entities bound to the element's
attributes and content.<p>

It is also possible to define ``<dfn>passive</dfn>'' actors, which match
particular ``features'' in a document, usually special attributes or
particular attribute values.<p>

A collection of predefined actors designed to work together should really be
called a ``cast,'' but in fact is called a ``<dfn>tagset</dfn>,'' in part
because it's less likely to be misunderstood--``cast'' has a quite different
meaning in programming languages like C++.  (MetaHTML also uses ``tagset'' in
this sense.)<p>

The PIA defines a <a href="#standard_tagset">standard tagset</a> for use in
InterForms.  Some agents may define special tagsets to be loaded alongside the
standard one.  Completely different tagsets can also be defined for different
kinds of document processing:  parsing HTML, formatting, even translating SGML
documents with other document types <em>into</em> HTML.<p>


<h2>The InterForm Interpretor</h2>

<h3>Overview</h3>

At this point, astute readers with writing experience will recognize actors
and entities as special kinds of ``macros'' and ``abbreviations,'' and would
suspect that processing an InterForm file involves running it through a kind
of formatting or typesetting engine.  Readers with programming experience
might instead choose to regard them as ``functions'' and ``variables,'' and
expect to find a kind of interpretor.  Both would be perfectly correct.<p>

The InterForm Interpretor (II) operates almost exactly like any other SGML
text-processing application.  It takes in a stream of characters from a file,
an HTTP server, or an input device, and turns it into a stream of
``<dfn>tokens</dfn>.''  Each token is either a string of ordinary characters,
an entity name, or a piece of ``markup:'' a start tag, end tag, or SGML
declaration.<p>

Next, any entities in the input stream are ``expanded,'' which means that
input starts coming from the entity instead of from the original input stream.
At this point, any end tags are paired with their corresponding start tag.
Any end tags that may have been omitted (hardly anyone codes ``&lt;/li&gt;,''
the end tag for a list item, for example) are generated automatically. <p>

Finally the resulting tokens are sent to an output stream, usually a user's
Web browser.<p>

<em>Actually, things are a little more complicated than that.  But only a
little.</em> <p>

The complication comes in because of actors.  At any point in the process some
actor might ``recognize its cue'' and start doing things.  Actors are rather
limited in what they can do.  They can:<p>

<ul>
  <li> tell the interpretor to divert incoming tokens to someplace where the
       actor can look at them later
  <li> tell the interpretor to stop expanding entities and recognizing actors
  <li> define new entities, or redefine existing ones
  <li> perform some operations on the current ``element''
  <li> tell the interpretor to replace the current element, its contents,
       or any of its attributes, with new data.
</ul>

<h3>Terminology</h3>

Diverting incoming tokens is called ``<dfn>parsing</dfn>;''  the result
is that the interpretor constructs a compound object consisting of the start
tag and its content--in other words the entire element.<p>

Replacing an element, attribute, or entity with new data is called
``<dfn>expanding</dfn>'' it, because it usually (not always) gets bigger as a
result.<p>

Allowing an actor to perform processing on an element is called
``<dfn>applying</dfn>'' the actor to the element.<p>

Associating an entity or attribute name with a value is called
``<dfn>binding</dfn>'' the name to the value.  A value may be anything from a
single character to an entire document with markup.<p>

Processing a stream of incoming tokens (parsing, expanding, and applying
actors) is called ``<dfn>evaluating</dfn>'' it.<p>


<h2>The InterForm Language</h2>

<h3>Syntax</h3>


<h3>Entities</h3>


<h3>Elements</h3>


<h3>Lists</h3>



<h2>The <a name="standard_tagset">Standard Tagset</a></h2>


<hr>
<b>$Id$</b><br>
<!-- hhmts start -->
Last modified: Sun Dec  1 10:31:28 1996
<!-- hhmts end -->
<p>
<address><a href="http://www.crc.ricoh.com/people/steve/steve.html"
         >Stephen R. Savitzky</a> &lt;<a href="mailto:steve@crc.ricoh.com"
         >steve@crc.ricoh.com</a>&gt;</address>
</body></html>
