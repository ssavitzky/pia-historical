<!doctype html public "-//IETF//DTD HTML//EN//2.0">
<html><head>
<title>Appendices</title>
<link rev="made" href="mailto:steve@rsv.ricoh.com">
</head><body>
<include src=config.inc>
<h1>Appendices</h1>
<div align=right><a href="lw99.slides.html#branch">Back to branch point.</a>
</div>

<slide><!-- Slide 0 doesn't have a title -->
<p>&nbsp;
<p>&nbsp;
<div align=center valign=center>
<font size='+2'
  ><strong>&subCaption;</strong></font>
</div>
<p>&nbsp;
<ul>
  <li> <a href="#acks">Acknowledgments</a>
  <li> <a href="#QA">Questions and Answers</a>
  <li> <a href="#additional">Additional Material</a>
</ul>
</slide>

<hr><set name=subCaption>Acknowledgments</set><set name=lable>acks</set>
<slide><h2>Software Used</h2>
<table>
  <tr> <th align=right>Text:    	
       <td> GNU Emacs, LaTeX, PIA
  <tr> <th align=right>Graphics:	
       <td> xfig, ghostscript, netPBM
  <tr> <th align=right>Programming:	
       <td> Java, Perl
  <tr> <th align=right>Scripting:	
       <td> PIA, Perl, bash
  <tr> <th align=right>Web Clients:	
       <td> PIA, Netscape, chimera
  <tr> <th align=right>Web Servers:	
       <td> PIA, Apache
  <tr> <th align=right>OS:		
       <td> <strong><a href="http://www.linux.org/">Linux!</a></strong>
	    <em>(of course)</em>
</table>
</slide>

<slide><h2>Hardware Used</h2>
<table>
  <tr> <th align=right> Desktop:
       <td> <a href="http://www.varesearch.com/">VA Research</a>
  <tr> <th align=right> Laptop:
       <td> <a href="http://www.ricoh-usa.com/">Ricoh</a>
	    <a href="http://www.ricoh-usa.com/prodshw/minipc/">Magio</a>
  <tr> <th align=right> Server/NC:
       <td> <a href="http://www.corelcomputer.com/">Corel</a> NetWinder
</table>
</slide>

<hr><set name=subCaption>Questions and Answers</set><set name=label>QA</set>
<slide><h2>Isn't this just like &lt;active page language&gt;?</h2>

(Fill in the &lt;blank&gt; with ASP (Basic) / JSP (Java) / PHS (Python)...)

<ul>
  <li> PIA is the <em>only</em> system using XML syntax (AFAIK)
       <ul>
	 <li> <strong>only one syntax to learn</strong>
       </ul>
  <li> Seamless integration with document processing
       <ul>
	 <li> same tags used for code, data, and documents
       </ul>
  <li> ``Scripts'' can be <em>processed</em>, too!
       <ul>
	 <li> Automatically-generated documentation
	 <li> code and document pretty-printing
	 <li> Analysis, indexing, metrics
	 <li> Re-use (can select code and text fragments in other documents) 
       </ul>
</ul>
</slide>

<slide><h2>Why not just use &lt;page-building tool&gt;?</h2>
<ul>
  <li> Most of these are proprietary
       <ul>
	 <li> so they lock you in to proprietary server-side runtime
	      packages.
	 <li> not to mention being non-portable
       </ul>
  <li> Even the open ones generate opaque code
       <ul>
	 <li> ugly and hard to maintain by hand
	 <li> ...so you're locked in to the tool again
       </ul>
  <li> Many generate code that runs on the <em>client</em> side.
</ul>
</slide>

<slide><h2>What About XSL?</h2>
<ul>
  <li> We started this project before XSL came on the scene
  <li> On the other hand, it wouldn't be hard to implement XSL as a tagset
  <li> But you can't embed XSL formatting commands in a regular XML document,
       the way we can with DPS.
</ul>
</slide>

<slide><h2>What about DSSSL?</h2>
<ul>
  <li> Here we just didn't look hard enough at alternatives -- we might never
       have invented the DPS if we'd started with DSSSL.
  <li> On the other hand, it's not meant for embedding in documents, and uses
       what to some is an obscure syntax.
  <li> On the third hand, we think that a DSSSL <em>implementation</em> of the
       DPS would be a good idea, and we're hoping somebody does it.
</ul>
</slide>

<slide><h2>What about XML Namespaces?</h2>
<ul>
  <li> Another case of our design preceeding the spec.
  <li> On the other hand, we're already starting to implement tag namespaces,
       because they're incredibly useful.
  <li> We <em>already</em> support namespaces for entities, but use them a
       little differently. 
</ul>
</slide>

<hr><set name=subCaption>Additional Material</set>
<slide><h2>Additional Material</h2><set name=label>additional</set>

<p> This section contains a few slides that, for one reason or another, don't
    belong in the main stream of the presentation.

</slide>

<slide><h2>Apology</h2><set name=label>apology</set>
<p> I have to apologise to everyone in the audience who has the CD-ROM in
    their laptop and was hoping to follow along with me.   One of the
    advantages of electronic documents is that you can change them <em>very
    quickly.</em>

<p> A lot of this presentation was cooked up over the weekend, and some of the
    bits are still warm.  There's an up-to-date version on our web site.
</slide>

<slide><h2>O'Reilly on Infoware</h2><set name=label>infoware</set>

<p><em>``<font color=red><strong>A killer application is</strong></font> no
longer a desktop productivity application or even a back-office enterprise
software system, but <font color=red><strong>an entirely new breed, something
you might call</strong></font> an `information application' or perhaps even
`<font color=red><strong>infoware.</strong></font>'</em>

<p><em> ``Traditional software embeds small amounts of information in a lot of
software; <font color=red><strong>infoware embeds small amounts of software in
a lot of information.</strong></font> The `actions' in an infoware product are
generally fairly simple: make a choice, buy or sell, enter a small amount of
data and get back a customized result -- the primary interaction with the user
is managed largely via the Web page (which may have been <font
color=red><strong>created by a writer, editor, or designer</strong></font>
rather than by a programmer, with a relatively small amount of programming
support.)''  </em>

<div align=right>-- Tim O'Reilly, of O'Reilly and Associates.</div>
</slide>


<slide><h2>The Implementation</h2><set name=label>implementation</set>
<ul>
  <li> General Technique:
       <ul>
	 <li> Processor gets input from a parse tree traverser
	 <li> Sends output to a parse tree constructor
       </ul>
  <li> Algorithm:
       <ul>
	 <li> Convert input to a parse tree.
	 <li> Each ``element'' has a parent Node and content NodeList.
	 <li> Parser associates an action with each node
	 <li> Traverse the parse tree depth first
	 <li> Actions pass result nodes to an output tree constructor
       </ul>
  <li> Advantages:
       <ul>
	 <li> Basic algorithm is very simple
	 <li> All table lookup is done once, in the parser
	 <li> Saving parse trees in server RAM gives a major speedup
       </ul>
</ul>
</slide>

<slide><h2>Main Loop</h2><set name=label>main-loop</set>
<pre>
  <font color=red>/** Process the current Node */</font>
  public final void <font color=blue>processNode</font>() {
    Action handler = input.getAction();
    if (handler != null) {
      handler.action(input, this, output));
    } else {
      copyExpandingChildren(input, this, output);
    }
  }
  <font color=red>/** Copy the children of the current Node */</font>
  public final void <font color=blue>copyExpandingChildren</font>() {
    output.startNode(input.getNode());
    for (Node node = input.toFirstChild() ;
	 node != null;
	 node = input.toNextSibling()) {
      processNode();
    }
    output.endNode();    input.toParent();
  }</pre>
</slide>


<slide><h2>Primitive Actions</h2><set name=label>primitives</set>
(all are active SGML <em>elements</em>)
<ul>
  <li> &lt;define&gt;       
  <li> &lt;if&gt; - &lt;then&gt; - &lt;else-if&gt; - &lt;else&gt;
  <li> &lt;test&gt;,  &lt;logical&gt;
  <li> &lt;repeat&gt;
  <li> &lt;extract&gt;
  <li> &lt;expand&gt;, &lt;protect&gt;, &lt;hide&gt;
  <li> &lt;text&gt;, &lt;numeric&gt;
  <li> &lt;subst&gt;
</ul>
also:
<ul>
  <li> SGML <code>&amp;<em>entities</em>;</code> are used as variables.
</ul>
</slide>


<slide><h2>I/O and Data Conversion</h2>
(additional primitives and convenience functions)
<ul>
  <li> &lt;get&gt;, &lt;set&gt;
  <li> &lt;parse&gt;<br>
       <em>converts raw text to marked-up XML.</em>
  <li> &lt;include&gt;, &lt;output&gt;, &lt;connect&gt;, &lt;status&gt;<br>
       <em>I/O, including both files and URL's.</em>
  <li> &lt;DOCUMENT&gt;, &lt;HEADERS&gt;, &lt;URL&gt;, &lt;QUERY&gt;, ...<br>
       <em>data structure representation and conversion</em>
  <li> &lt;debug&gt;
</ul>

<p>
(There's more, but not <em>much</em> more:)

<ul>
  <li> There are a few elements used <em>inside</em> the primitives
  <li> ... most primitives are modified by <em>attributes</em>,
  <li> ... but the basic language is still fairly small. 
       <p>
  <li> New tags can be easily defined
       <ul>
	 <li> usually in terms of old ones
	 <li> can connect to Java ``handler''
       </ul>
       <p>
</ul>
</slide>

<slide><h2>Webmaster's Assistant</h2><set name=label>assistant</set>
<em>(personal project: for my kids' links)</em>
<ul>
  <li> <b>Browse to a page</b>
  <li> <b>Extract title, first paragraph</b>
  <li> <b>Get category, keywords from user</b>
  <li> <b>Construct an index entry</b> like this one:
</ul>
<p>
<dl>
  <dt> <a href="http://www.risource.org">pia.rsv.ricoh.com</a>
       PIA -- Platform for Information Applications
  <dd> PIA is a software framework for flexible and dynamic information
       applications. It was created by researchers at Ricoh Silicon
       Valley and makes it possible to create and maintain a new
       generation of customized information processing applications.
       <ul>
	 <li> Entry created 1999-02-25
	 <li> <b>Note: </b> Maybe we could use this...
       </ul>
</dl>
</slide>

<slide><h2>For example...</h2><set name=label>hello-world</set>

<p> Here's a typical ``active document''

<pre><font color=green>
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt; Hello world!&lt;title&gt;
  &lt;/head&gt;
  &lt;body&gt;</font>
    &lt;header&gt; a classic example &lt;/header&gt;<font color=green>
    &lt;hr&gt;
    Hello world!</font>
    &lt;footer cvsid="$ Id... $"&gt;<font color=green>
  &lt;/body&gt;
&lt;/html&gt;</font>
</pre>

...which becomes <a href="/demo/hello-world">this page on the server</a>.
(<a href="Images/hello-world.html">local copy</a>)<br>
(<a href="appendices.slides.html#previewer">another example</a>)
</slide>


<slide><h2>Example: Slide Previewer</h2><set name=label>previewer</set>
Here's what I used for a <a href="/View/slides">Slide previewer</a>.
<pre>
&lt;if&gt;&lt;get name=FORM:url&gt;
  &lt;then&gt;
    &lt;set name=URL&gt;&lt;text decode=url&gt;&amp;FORM:url;&lt;/text&gt;&lt;/set&gt;
    &lt;include src="&amp;URL;" tagset="&amp;FORM:tagset;" /&gt;
  &lt;/then&gt;&lt;else&gt;
    &lt;html&gt;&lt;head&gt;&lt;title&gt;Slide viewer&lt;/title&gt;
    &lt;/head&gt;&lt;body&gt;
      &lt;header&gt;View&lt;/header&gt;  &lt;hr&gt;
      &lt;form method=GET action=/View/slides&gt;
        &lt;input type=submit value="View Slides"&gt;
        &lt;input type=hidden name=tagset value=slides&gt;
        &lt;b&gt;URL:&lt;/b&gt; &lt;input name=url size=55 maxlength=200&gt;
      &lt;/form&gt;
      &lt;footer&gt;
    &lt;/body&gt;&lt;/html&gt;
  &lt;/else&gt;
&lt;/if&gt;
</pre>
</slide>

<slide><h2>Example: Browsing History</h2><set name=label>history</set>
<ul>
  <li> Consider this: (<a href="/History">live</a>)<br>
           
       <a href='Images/history-index.html'>/~History</a> /
       <a href='Images/1999.html'>1999</a> /
       <a href='Images/01.html'>01</a> /
       <a href='Images/29.html'>29</a>

  <li> ... which points to this (and more)<br>
14:27 <a href='http://internal/~wolff/position/'>http://internal/~wolff/position/ : </a><br>
14:27 <a href='http://internal/~wolff/position/infoapps.html'>http://internal/~wolff/position/infoapps.html : </a><br>
14:28 --image/gif- <a href='http://internal/~wolff/position/Image1.gif'>http://internal/~wolff/position/Image1.gif</a><br>
14:28 --image/gif- <a href='http://internal/~wolff/position/pia_arch1.gif'>http://internal/~wolff/position/pia_arch1.gif</a><br>
14:28 --image/gif- <a href='http://internal/~wolff/position/Image2.gif'>http://internal/~wolff/position/Image2.gif</a><br>
15:07 <a href='http://internal/~wolff/position.html'>http://internal/~wolff/position.html : </a><br>
15:08 <a href='http://www.varesearch.com/'>http://www.varesearch.com/ : </a><br>
15:08 --image/gif- <a href='http://www.varesearch.com/graphics/varback.gif'>http://www.varesearch.com/graphics/varback.gif</a><br>
...
  <li> (This is why I designed the system in the first place...)
</ul>
</slide>

<slide><h2>What's Going On?</h2>
<ul>
  <li> The document processor is <em>between the browser and the web</em>
  <li> It can look at
       <ul>
	 <li> requests
	 <li> responses
	 <li> documents
	 <li> local files
       </ul>
  <li> ``Agent'' (History, in this case)
       <ul>
	 <li> looks like a top-level directory
	      (<a href="/History">/History/</a>)
	 <li> does processing on behalf of <em>one user</em> (me)
	 <li> keeps persistent state.
       </ul>
  <li> Documents are the only interfaces.
</ul>

</slide>


<slide><h2>Cool Stuff</h2><set name=label>cool-stuff</set>
<p> There's lots more cool stuff I haven't mentioned.
<p>&nbsp;
<table width='80%' cellspacing=0 border=0 align=center>
  <tr> <th bgcolor=lightgreen colspan=3> Infoware Layer
  <tr> <th bgcolor=lightgreen colspan=3 valign=top align=left> Agents:
  <tr> <th bgcolor=lightgreen>&nbsp;
       <td bgcolor=white>
<ul>
  <li> You can use other servers as resources
  <li> ...and reprocess their documents
  <li> The tag language is highly extensible
</ul>
       <th bgcolor=lightgreen>&nbsp;
  <tr> <th bgcolor=lightgreen colspan=3>&nbsp;
  <tr>
  <tr> <th bgcolor=lightblue colspan=3> Software Layer
  <tr> <th bgcolor=lightblue colspan=3 valign=top align=left>Agency:
  <tr> <th bgcolor=lightblue>&nbsp;
       <td bgcolor=white>
<ul>
  <li> There are plenty of hooks in the code
  <li> ...for hanging special-purpose software
</ul>
       <th bgcolor=lightblue>&nbsp;
  <tr> <th bgcolor=lightblue colspan=3> &nbsp;
</table>
</slide>


<slide><h2>More Cool Stuff: Software</h2>
<table width='80%' cellspacing=0 border=0 align=center>
  <tr> <th bgcolor=lightgreen colspan=3> Infoware Layer
  <tr>
  <tr> <th bgcolor=lightblue colspan=3> Software Layer
  <tr> <th bgcolor=lightblue>&nbsp;
       <td bgcolor=white>
<ul>
  <li> <b>Simple</b>
       <ul>
	 <li> <a href="appendices.slides.html#main-loop">main loop</a>
	      is one page of code
	 <li> hooks for special-purpose code: easy to extend
       </ul>
  <li> <b>Highly portable</b>
       <ul>
	 <li> written in Java
	 <li> based on standards: XML, DOM, HTTP ...
	 <li> Linux on Intel, Sun (SPARC), Corel (ARM)
	 <li> Windows, Solaris, ...
       </ul>
  <li> <b>Efficient</b>
       <ul>
	 <li> can save memory in pass-through mode
	 <li> or cache document parse trees for speed
       </ul>
</ul>
       <th bgcolor=lightblue>&nbsp;
  <tr> <th bgcolor=lightblue colspan=3> &nbsp;
</table>
</slide>



<hr>
<set name=label>TOC</set>
<slide>
<h2>Table of Contents:</h2>
<ol>
  &slidelist;
</ol>
<div align=right><a href="lw99.slides.html#branch">Back to branch point.</a>
</div>
</slide>


<hr>
<b>Copyright &copy; 1998 Ricoh Silicon Valley</b><br>
<b>$Id$</b><br>
<address><a href="http://rsv.ricoh.com/~steve/"
         >Stephen R. Savitzky</a> &lt;<a href="mailto:steve@rsv.ricoh.com"
         >steve@rsv.ricoh.com</a>&gt;</address>
</body></html>
