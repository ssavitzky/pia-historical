<!doctype html public "-//IETF//DTD HTML//EN//2.0">
<html><head>
<title>Slides for LinuxWorld</title>
<link rev="made" href="mailto:steve@rsv.ricoh.com">
</head><body>
<h1>Slides for LinuxWorld 1999, Session 74</h1>
<set name=subCaption>S. Savitzky -- Ricoh Silicon Valley</set>

<!-- Due Feb. 1 in ftp.linuxcentral.com:/pub/session-74/ -->
<!-- See mail.conferences:102 -->
<set name=DOC:hh>440</set><!-- Tweak size for Netscape at 800x600 -->
<set name=DOC:logo><img src="Images/pent24.gif"></set>



<hr>
<slide><!-- Slide 0 doesn't have a title -->
<p>&nbsp;
<p>&nbsp;
<div align=center valign=center>
<font size='+2'
  ><strong>An Open-Source Web-Based Document Processing System</strong></font>

<p> Stephen Savitzky<br>
    <a href="http://rsv.ricoh.com/~steve/">http://rsv.ricoh.com/~steve/</a><br>
    <code>&lt;steve@rsv.ricoh.com&gt;</code>
<p> Ricoh Silicon Valley<br>
    <a href="http://rsv.ricoh.com/"><code>http://rsv.ricoh.com/</code></a>
</div>

</slide>


<hr>
<slide><h2>Overview</h2>

<ol>
  <li> Document Processing
  <li> Documents and the Web
  <li> Architecture and Implementation
  <li> Open Source
</ol>

</slide>

<hr><set name=subCaption>Document Processing</set>
<slide><h2>A Simple Example</h2>
<ul>
  <li> Input: <a href="lw99.html">a document</a>
       <pre>
       &lt;slide&gt; &lt;h2&gt;Document Processing&lt;/h2&gt;
          &lt;ul&gt;
             &lt;li&gt; Input: a document
          &lt;/ul&gt;
       &lt;/slide&gt;
       </pre>
  <li> ... processing using a ``<a href="Images/slides.ts">tagset</a>''
       <ul>
	 <li> A ``spreadsheet'' for documents
	 <li> Describes what to do with each tag
       </ul>
  <li> <code>process -tagset slides lw99.html &gt; lw99.slides.html</code>
  <li> Output: another document (this slide).
</ul>
</slide>

<hr>
<slide><h2>What's Going On</h2>
<ul>
  <li> A document's format is specified by a <br>
       Document Type Definition (DTD)
  <li> ... which is <em>another document!</em>
  <li> ... which we can represent in XML.
  <li> ... and <em>process</em>
       <p>
  <li> A ``<em>tagset</em>'' is a document that combines <br>
       a DTD with formatting commands. 
  <li> ... also represented in XML.
  <li> ... extended with standard programming constructs (XXML)
  <li> <em>Any</em> document may contain ``active'' constructs
  <li> ... resulting in ``<em>active documents</em>'' in XXML and XHTML
</ul>
</slide>

<hr>
<slide><h2>Another Example</h2>
<ul>
  <li> Input: <a href="Images/slides.ts">a document tagset specification</a>
<pre>
  &lt;tagset name=slides parent=HTML include=xxml recursive&gt; ...
  &lt;define element=slide parent=body&gt; &lt;action&gt; ...
  &lt;define entity=topBg&gt;&lt;value&gt;lightblue&lt;/define&gt;...
</pre>
  <li> ... processing using a different tagset
  <li> <code>process -tagset tsdoc slides.ts &gt; slides.html</code>
  <li> Output: <a href="Images/slides.html">documentation</a>.
</ul>
</slide>

<hr>
<slide><h2>What's Going On?</h2>
<ul>
  <li> Documents contain only content and markup (structure)
  <li> Behavior is associated with tags by a tagset
  <li> The same document can be processed in different ways with different
       tagsets.<br>
       -- think of them as similar to styles
       <p>
  <li> One way to look at it:
       <ul>
	 <li> we're abusing a text formatter
	 <li> ... to make a programming language
       </ul>
</ul>
</slide>

<hr>
<slide><h2>What's <em>Really</em> Going On?</h2>
<div align=center>
  <strong>A Document-Processing Engine for the Web</strong>
</div>
<ul>
  <li> The Web is made of documents
  <li> ``In the future, the only API's that matter will be the API's of web
       sites'' <br>
       -- Tim O'Reilly
  <li> What we have is a general-purpose document processor<br>
       ... designed <em>specifically</em> for web applications.
       <ul>
	 <li> Can operate as client, server, proxy, or any combination
	 <li> Can process other servers' documents<br>
	      ... <em>examples further on</em>
       </ul>
  <li> Serves as the basis for
       <ul>
	 <li> personal web assistants
	 <li> easy-to-administer servers
	 <li> web-based information appliances
       </ul>
</ul>
</slide>

<hr><set name=subCaption>Documents and the Web</set>
<slide><h2>Documents and the Web</h2>
<ul>
  <li> The Web has <em>totally transformed</em> the way we think about
       <ul>
	 <li> documents
	 <li> hypertext
	 <li> the Internet
	 <li> computers
	 <li> user interfaces
       </ul>
  <li> In particular,
       <ul>
	 <li> A document is a web page
	 <li> a hypertext document is a web site<br>
	      -- forget about earlier, more elaborate visions
	 <li> The Internet is the Web
	 <li> a computer is either a server or a browser
	 <li> a user interface is a collection of forms
       </ul>
</ul>
</slide>

<hr>
<slide><h2>A Document is not an Object</h2>
<ul>
  <li> Documents are <em>structured</em> data
  <li> ... = text + markup
  <li> Documents <em>separate</em> content from behavior
  <li> Therefore, documents...
       <ul>
	 <li> are <em>portable</em>
	 <li> can be processed in many ways<br>
	      [formatted, indexed, translated, ...]
	 <li> are <em>robust</em> (unlike serialized Java objects)
       </ul>
  <li> Documents may have
       <ul>
	 <li> multiple versions
	 <li> multiple representations (styles)
	 <li> multiple ``behaviors''
       </ul>
</ul>
</slide>

<hr>
<slide><h2>Appliances</h2>
<strong>The future of computing is <em>networked appliances</em></strong>
<ul>
  <li> Web-enabled
  <li> Mostly special-purpose
  <li> May be clients, servers, or (ta-da!) document processors
</ul>
</slide>

<hr>
<slide><h2>Appliances on the Web</h2>
<strong>An appliance contains a thin server.</strong>
<a href="/PIA/Doc/Graphics/webprinter.small.gif"><img
   src="/PIA/Doc/Graphics/webprinter.small1.gif" align=right width=300></a> 
<ul>
  <li> Used through its Web pages
  <li> Pages are generated by agents
       <ul>
	 <li> from ``active documents''
	 <li> (optional) custom code
       </ul>
  <li> Agents run on Agency infrastructure
       <ul>
	 <li> Processes HTTP requests
	 <li> Implements XML standard
	 <li> Runs agents
       </ul>
  <li> Examples:
       <ul>
	 <li> WebPrinter
	 <li> Photo Album
       </ul>
</ul>
</slide>

<hr>
<slide><h2></h2>
</slide>
<hr>
<slide><h2></h2>
</slide>
<hr>
<slide><h2></h2>
</slide>
<hr>
<slide><h2></h2>
</slide>

<hr><set name=subCaption>Architecture and Implementation</set>
<slide><h2>Architecture and Implementation</h2>
</slide>

<hr>
<slide><h2>Agency Architecture Layers</h2>

<ul>
  <li> Server Front End
       <ul>
	 <li> Handles HTTP requests
	 <li> Dispatches requests to ``agents''
       </ul>
  <li> Agent handlers
       <ul>
	 <li> Manage a group of pages
	 <li> May have special-purpose code.
       </ul>
  <li> Document Processor for active pages
       <ul>
	 <li> Interprets markup in active documents
	 <li> Rarely needs to be changed
	 <li> Recently re-written
       </ul>
  <li> ``Action'' handlers for tags
       <ul>
	 <li> Written in Java or C
	 <li> Loaded as needed at run-time
       </ul>
</ul>
</slide>

<hr>
<slide>
<h2>PIA's Document Processor</h2>
<ul>
  <li> Simple
       <ul>
	 <li> Main loop fits on a single page.
	 <li> Easy to maintain and describe.
       </ul>
  <li> Versatile
       <ul>
	 <li> stream, string and parse tree input and output 
	 <li> can build parse trees while processing
       </ul>
  <li> Portable
       <ul>
	 <li> based on W3C's Document Object Model
	 <li> C or C++ version would be feasible
	 <li> An earlier version was written in Perl
       </ul>
</ul>
</slide>

<hr>
<slide><h2>The Implementation</h2>

<ul>
  <li> General Technique:
       <ul>
	 <li> Processor gets input from a parse tree traverser
	 <li> Sends output to a parse tree constructor
       </ul>
  <li> Algorithm:
       <ul>
	 <li> Convert input to a parse tree.
	 <li> Each ``element'' has a parent Node and content NodeList.
	 <li> Parser associates an action with each node
	 <li> Traverse the parse tree depth first
	 <li> Actions pass result nodes to an output tree constructor
       </ul>
  <li> Advantages:
       <ul>
	 <li> Basic algorithm is very simple
	 <li> All table lookup is done once, in the parser
	 <li> Saving parse trees in server RAM gives a major speedup
       </ul>
</ul>
</slide>

<hr>
<slide><h2>Primitive Actions</h2>
(all are active SGML <em>elements</em>)
<ul>
  <li> &lt;define&gt;       
  <li> &lt;get&gt;, &lt;set&gt;
  <li> &lt;if&gt; - &lt;then&gt; - &lt;else-if&gt; - &lt;else&gt;
  <li> &lt;test&gt;,  &lt;logical&gt;
  <li> &lt;repeat&gt;
  <li> &lt;select&gt;
  <li> &lt;expand&gt;, &lt;protect&gt;, &lt;hide&gt;
  <li> &lt;text&gt;, &lt;numeric&gt;
  <li> &lt;subst&gt;
</ul>
</slide>

<hr>
<slide><h2>I/O and Data Conversion</h2>
(additional primitives)
<ul>
  <li> &lt;parse&gt;<br>
       <em>converts raw text to marked-up XML.</em>
  <li> &lt;include&gt;, &lt;output&gt;, &lt;connect&gt;, &lt;status&gt;<br>
       <em>I/O, including both files and URL's.</em>
  <li> &lt;DOCUMENT&gt;, &lt;HEADERS&gt;, &lt;URL&gt;, &lt;QUERY&gt;, ...<br>
       <em>data structure representation and conversion</em>
  <li> &lt;debug&gt;
</ul>
</slide>

<hr>
<slide><h2>There's more...</h2>
(but not <em>much</em> more:)
<p>

<ul>
  <li> There are a few elements used <em>inside</em> the primitives
  <li> ... most primitives are modified by <em>attributes</em>,
  <li> ... but the basic language is still fairly small. 
       <p>
  <li> New tags can be easily defined
       <ul>
	 <li> usually in terms of old ones
	 <li> can connect to Java ``handler''
       </ul>
       <p>
  <li> SGML <code>&amp;<em>entities</em>;</code> are used as variables.
</ul>
</slide>

<hr>
<slide><h2>For example...</h2>
<pre>
&lt;define element=factorial recursive&gt;
  &lt;doc&gt;the Factorial function&lt;/doc&gt;
  &lt;action&gt;
    &lt;if&gt;&lt;test zero&gt;&amp;content;&lt;/test&gt;
      &lt;then&gt;1&lt;/then&gt;
      &lt;else&gt;&lt;numeric product&gt;
              &amp;content;
              &lt;factorial&gt;&lt;numeric difference&gt;&amp;content; 1
                         &lt;/numeric&gt;
              &lt;/factorial&gt;
           &lt;/numeric&gt;
      &lt;/else&gt;
    &lt;/if&gt;
  &lt;/action&gt;
&lt;/define&gt;
</pre>

<em>It's not really meant for numeric processing!</em>
</slide>

<hr>
<slide><h2>A better example...</h2>
<pre>
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt; hello world!&lt;title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;header&gt; a classic example &lt;/header&gt;
    Hello world!
    &lt;footer&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>

<em>it's really meant for web pages.</em>
</slide>

<hr>
<slide><h2>For another...</h2>
<pre>
  === something more spectacular here, please ===
  === maybe the history agent's hook, or a sucks-rules-meter ===
</pre>
</slide>

<hr>
<slide><h2></h2>
</slide>

<hr>
<slide><h2></h2>
</slide>

<hr>

<hr><set name=subCaption>Open Source</set>
<slide><h2></h2>
</slide>

<hr>
<slide><h2></h2>
</slide>

<hr>
<slide><h2></h2>
</slide>

<hr>
<slide><h2>Developer's Website</h2>

<strong>The PIA framework is organized as a web site</strong><br>
<em>for use by developers</em>
<ul>
  <li> <a href="http://pia.rsv.ricoh.com/">http://pia.rsv.ricoh.com/</a>:
       PIA Group Server
  <li> <a href="/PIA/Doc">Documentation</a>
       <ul>
	 <li> <a href="/PIA/Doc/Manuals">Manuals</a>
	 <li> <a href="/PIA/Doc/Release">Release notes</a>
	 <li> <a href="/PIA/Doc/Tutorial">Tutorial</a>
       </ul>
  <li> <a href="/PIA/src">Source Code</a>
  <li> <a href="/PIA/Config#app">Examples</a>
</ul>
Makes technical transfer very easy.
</slide>

<hr>
<set name=label>TOC</set>
<slide><!-- toc not working: tagset doesn't seem to be properly recursive. -->
<h2>Table of Contents:</h2>
<ol>
  &slidelist;
</ol>
</slide>

<hr>
<toc>Table of Contents</toc>
<hr>

<b>Copyright &copy; 1999 Ricoh Silicon Valley</b><br>
<b>$Id$</b><br>
<address><a href="http://rsv.ricoh.com/~steve/"
         >Stephen R. Savitzky</a> &lt;<a href="mailto:steve@rsv.ricoh.com"
         >steve@rsv.ricoh.com</a>&gt;</address>
</body></html>
