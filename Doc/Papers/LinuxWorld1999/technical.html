<!doctype html public "-//IETF//DTD HTML//EN//3.2">
<html><head>
<title>Technical Details</title>
<link rev="made" href="mailto:steve@rsv.ricoh.com">
</head><body>
<h1>Technical Details</h1>
<include src=config.inc>


<slide><h2>Example: form processing</h2>
<set name=subCaption>Old style processing</set>
<div align=center> <b>Check Approval Form</b>
</div>

<form>
  <table>
   <tr><td align=right>Requestor:  <td><input name=name value="Stephen Savitzky">
   <tr><td align=right>Amount:     <td><input name=amt value="2300">
   <tr><td align=right>Item:       <td><input name=amt width=30 value="Laptop computer">
   <tr><td align=right>Reference:  <td><a href=/forms/PR/1024>PR-1999-02-29-0100</a>
   <tr><td align=right>Name: <td> <input name=name value="Greg Wolff">
   <tr><td align=right>Sign: <td> <input name=pass>
   <tr><td align=right><input type=submit value="Route to">:
       <td> <input name=next value="Peter Hart">
  </table>
</form>

</slide>


<slide><h2>Processing -- the <em>"old"</em> way</h2>

<em>The user requests a form from the server:</em>
<ul>
  <li> <b>Assembling the Form</b>
       <ul>
	 <li> Extract basic info from PR (XML)
	 <li> Get full names from <code>/etc/passwd</code> (text)
	 <li> Construct form (HTML)
       </ul>
</ul>
<p>
 <em>At this point, the user fills out the form and submits it </em>
<p>
<ul>
  <li> <b>Handling the form</b>
       <ul>
	 <li> Verify digital signature
	 <li> Update database
	 <li> Send e-mail to next person in route
	 <li> Construct response page (HTML)
       </ul>
</ul>
<em>Looks like about two CGI scripts...</em>
</slide>

<slide><h2>Now how about adding a field?</h2>

Maybe we want to add the vendor's name and number

<form>
  <table>
   <tr><td align=right>Vendor:  <td><input name=vendor value="">
   <tr><td align=right>Phone:   <td><input name=vphone value="">
  </table>
</form>

<em>OK, HTML is simple, right?</em>

<pre><b>
   Vendor:  &lt;input name=vendor&gt;&lt;br&gt;
   Phone:   &lt;input name=vphone&gt;&lt;br&gt;
</b></pre>
</slide>

<slide><h2>It's not that simple!</h2>
<ul>
  <li> <b>Add field to the HTML</b>
       <ul>
	 <li> oh yeah; that was generated by a script
	 <li> <em>the consultant who wrote it isn't around</em>
       </ul>
  <li> <b>Well, first you learn PERL</b>
       <ul>
	 <li> haul out the books
	 <li> study the code
	 <li> <em>what</em> documentation?
       </ul>
  <li> <b>Add processing for the new field</b>
       <ul>
	 <li> haul out the books again
       </ul>
  <li> <b>Did we mention debugging?</b>
</ul>
<em>Too much work.</em>
</slide>


<slide><h2>The problem</h2>
<em>It all goes back to the nature of documents on computers:</em>
<ul>
  <li> Documents and software have different languages
      <ul>
	 <li> usually in separate files
       </ul>
  <li> Developing applications requires programming
       <ul>
	 <li> <em>There's never a programmer around when you need one.</em>
       </ul>
       <p>
</ul>
<em>So the problem is:</em>
<ul>
  <li> how to give control over processing back to the person who
       owns the document?
</ul>
</slide>



<slide><h2>The problem domain: infoware</h2>
<set name=subCaption>Information applications</set>
<p>&nbsp;
<ul>
  <li> These systems are <strong>information applications</strong>:
       <ul>
	 <li> a small amount of software 
	 <li> embedded in a large amount of information
       </ul>
<p>

  <li> What Tim O'Reilly calls ``<strong>Infoware</strong>''
</ul>

</slide>



<slide><h2>The solution</h2>
<set name=subCaption>The Platform for Information Applications</set>
<p>&nbsp;

<table width='90%' cellspacing=0 border=0 align=center>
  <tr> <th colspan=3 align=left> A new representation for infoware.
  <tr> <th bgcolor=lightgreen colspan=3 valign=top align=left>&nbsp; 
  <tr> <th bgcolor=lightgreen>&nbsp;
       <td bgcolor=white>
<ul><!-- === needs a lot of work:  central -->
  <li> <b>Documents have embedded processing instructions</b>
       <ul>
	 <li> Everything needed for a form is in <em>one file</em> 
       </ul>
  <li> <b>But use a <em>single representation</em> (XML)</b>
       <ul>
	 <li> In other words, we simply define <em>actions</em> <br>
	      for some of the tags in a document
       </ul>
</ul>
       <th bgcolor=lightgreen>&nbsp;
  <tr> <td bgcolor=lightgreen colspan=3 align=right> &nbsp;
  <tr> <td align=right colspan=3> <em> It's tags all the way down</em>

</table>
</slide>

<slide><h2>Here's how we build a form:</h2>
<ul>
  <li> HTML and processing in the same file.
       <pre><b>
&lt;form action='&amp;url;&gt;  
  &lt;set name=vendor>&lt;get name=PR:vendor&gt;&lt;/set&gt;
    &lt;!-- ... --&gt;
  Vendor: &lt;input name=vendor value=&amp;vendor;&gt;&lt;br&gt;
  Phone: &lt;input name=vphone value=&amp;vphone;&gt;
  &lt;process&gt;
    &lt;if&gt;&lt;get name=approved&gt; 
       &lt;then&gt; &lt;send-email dst=purchasing&gt;
		 &lt;!-- ... --&gt; 
		 Vendor: &amp;FORM:vendor;
                 Phone: &amp;FORM:vphone;.
	      &lt;/send-email&gt;
       &lt;/then&gt;
    &lt;/if&gt;       
  &lt;/process&gt;
&lt;/form&gt;
       </b></pre>
</ul>
</slide>

<slide><h2>A single language for content &amp; processing</h2>
<ul>
  <li> <font color=green>HTML content</font> and processing
       <em>in the same language.</em>
       <pre><b>
<font color=green>&lt;form action='&amp;url;&gt;</font>    
  &lt;set name=vendor>&lt;get name=PR:vendor&gt;&lt;/set&gt;
<font color=green>    &lt;!-- ... --&gt;
  Vendor: &lt;input name=vendor value=&amp;vendor;&gt;&lt;br&gt;
  Phone: &lt;input name=vphone value=&amp;vphone;&gt;</font>
  &lt;process&gt;
    &lt;if&gt;&lt;get name=approved&gt; 
       &lt;then&gt; &lt;send-email dst=purchasing&gt;
		 <font color=green>&lt;!-- ... --&gt; 
		 Vendor: &amp;FORM:vendor;
                 Phone: &amp;FORM:vphone;.</font>
	      &lt;/send-email&gt;
       &lt;/then&gt;
    &lt;/if&gt;       
  &lt;/process&gt;
<font color=green>&lt;/form&gt;</font>
       </b></pre>
</ul>
</slide>

<slide><h2>A New Design for Information Applications</h2>
<!-- === needs a lot of work, along with "how we do it" === central === -->

<table width='80%' cellspacing=0 border=0 align=center>
  <tr> <th bgcolor=lightgreen colspan=3 valign=top align=left> Agents:
  <tr> <th bgcolor=lightgreen>&nbsp;
       <td bgcolor=white>
<ul>
  <li> <b>A group of active documents performs a task</b>
       <ul>
	 <li> we call this group an <em>Agent</em>
	 <li> <code>/Purchasing/purchase-request</code><br>
	      <code>/Purchasing/approve-check</code><br>
	      <code>/Purchasing/confirm-receipt</code><br>
       </ul>
</ul>
       <th bgcolor=lightgreen>&nbsp;
  <tr> <td bgcolor=lightgreen colspan=3 align=right> Infoware &nbsp;
  <tr> <th bgcolor=lightblue colspan=3 valign=top align=left>Agency:
  <tr> <th bgcolor=lightblue>&nbsp;
       <td bgcolor=white>

<ul>
  <li> <b>Agents ``live'' on a web server</b>
       <ul>
	 <li> which we call the <em>Agency</em>
	 <li> makes the documents <em>active</em>
       </ul>
</ul>
       <th bgcolor=lightblue>&nbsp;
  <tr> <td bgcolor=lightblue colspan=3 align=right>Software &nbsp;

</table>


<p>An application is a web site.
<table cellspacing=0 cellpadding=2 border=0 align=center>
  <tr>	<th>&lt;</th>
	<td bgcolor=lightblue>http://forms.crc.ricoh.com</td>
	<td bgcolor=lightgreen>/Purchasing</td>
	<td bgcolor=lightgreen>/approve-check</td>
	<th>&gt;</th>
</table>

</slide>

<slide><h2>A Framework for Infoware</h2>

<p><strong>A re-useable design for a class of applications</strong> 
<ul>
  <li> ...is  called a ``<strong>framework</strong>:''
</ul>

<table width='80%' cellspacing=0 border=0 align=center>
  <tr> <th bgcolor=white colspan=3 valign=top align=left>
	<table width='100%' cellspacing=0 border=0 >
	  <tr>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> &nbsp; </th>
		<td bgcolor=lightgreen>&nbsp;</td>
		<td bgcolor=white>&nbsp;</td>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> &nbsp; </th> 
		<td bgcolor=lightgreen>&nbsp;</td>
		<td bgcolor=white>&nbsp;</td>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> &nbsp;  </th>
		<td bgcolor=lightgreen>&nbsp;</td>
		<td bgcolor=white>&nbsp;</td>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> &nbsp; </th>
		<td bgcolor=lightgreen>&nbsp;</td>
	  <tr>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> App 1 </th>
		<td bgcolor=lightgreen>&nbsp;</td>
		<td bgcolor=white>&nbsp;</td>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> App 2 </th> 
		<td bgcolor=lightgreen>&nbsp;</td>
		<td bgcolor=white>&nbsp;</td>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> App 3  </th>
		<td bgcolor=lightgreen>&nbsp;</td>
		<td bgcolor=white>&nbsp;</td>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> App 4 </th>
		<td bgcolor=lightgreen>&nbsp;</td>
	  <tr>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> &nbsp; </th>
		<td bgcolor=lightgreen>&nbsp;</td>
		<td bgcolor=white>&nbsp;</td>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> &nbsp; </th> 
		<td bgcolor=lightgreen>&nbsp;</td>
		<td bgcolor=white>&nbsp;</td>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> &nbsp; </th>
		<td bgcolor=lightgreen>&nbsp;</td>
		<td bgcolor=white>&nbsp;</td>
		<td bgcolor=lightgreen>&nbsp;</td>
		<th bgcolor=lightgreen> &nbsp; </th>
		<td bgcolor=lightgreen>&nbsp;</td>
	  </tr>
	</table> </th></tr>
  <tr> 
  <tr>
  <tr> <th bgcolor=lightblue colspan=3 valign=top align=left>Agency:
  <tr> <th bgcolor=lightblue>&nbsp;
       <td bgcolor=white>
<ul>
  <li> The software base is stable
  <li> ...and shared by all applications
</ul>
       <th bgcolor=lightblue>&nbsp;
  <tr> <th bgcolor=lightblue colspan=3 align=right> Software &nbsp;
</table>
<p>
Frameworks allow very rapid development.

</slide>

<slide><h2>PIA is a  framework:</h2>

<ol>
  <li> A shared software base
       <ul>
	 <li> stable, so most applications don't need to change it
       </ul>
  <li> <em>Lots</em> of documentation
       <ul>
	 <li> User's manual, tutorial, reference manual, ...
	 <li> Internals, maintenance documents, ...
       </ul>
  <li> <strong><em>Working</em> sample applications</strong> (agents)
       <ul>
	 <li> Meant to be extended and modified
	 <li> The designer starts from something that <em>already works</em>
       </ul>
  <li> <strong>Open Source Code</strong>
       <ul>
	 <li> so it can be used, extended, examined,
	 <li> ... improved, evolved, and <strong>customized</strong>
       </ul>
</ol>
</slide>


<slide><h2>The infoware layer</h2>
<p>
<table width='90%' cellspacing=0 border=0 align=center>
  <tr> <th bgcolor=lightgreen colspan=3 valign=top align=left> Agents:
  <tr> <th bgcolor=lightgreen>&nbsp;
       <td bgcolor=white>
<ul>
  <li> <b>An application <em>is</em> a website</b>
  <li> <b>Each <em>agent</em> looks like a directory</b>
       <ul>
	 <li> that contains active documents
	 <li> that work together to perform a task
       </ul>
  <li> <b>Documents can have embedded action tags</b>
       <ul>
	 <li> <em>one representation:</em> XML 
	 <li> some tags are macros, defined in a <em>tagset</em> document
	 <li> a few are ``<a href="appendices.slides.html#primitives"
	      >primitive</a>,'' defined by software 
       </ul>
</ul>
       <th bgcolor=lightgreen> &nbsp;
  <tr> <td bgcolor=lightgreen colspan=3>&nbsp;
       <em>Mainly for information designers.</em>
  <tr> <th bgcolor=lightgreen colspan=3 align=right> Infoware &nbsp;
  <tr>
  <tr> <td bgcolor=lightblue colspan=3 align=right> Software &nbsp;
</table>

<p>
</slide>


<slide><h2>The software layer</h2>
<p>&nbsp;
<table width='80%' border=0 cellspacing=0 align=center>
  <tr> <td bgcolor=lightgreen colspan=3 align=right> Infoware &nbsp;
  <tr>
  <tr> <th bgcolor=lightblue colspan=3 align=right> Software &nbsp;
  <tr> <th bgcolor=lightblue colspan=3 valign=top align=left>Agency:
  <tr> <th bgcolor=lightblue>&nbsp;
       <td bgcolor=white>
<ul>
  <li> <b>Document Processor</b>
       <ul>
	 <li> Assigns meaning to &lt;tags&gt;
	      by performing associated actions
	 <li> W3C's Document Object Model
	 <li> General-purpose SGML parser
       </ul>
  <li> <b>Web server</b>
       <ul>
	 <li> Routes requests to appropriate agents
	 <li> Allows agents to modify documents
       </ul>
</ul>
       <th bgcolor=lightblue>&nbsp;
  <tr>
  <tr> <th bgcolor=lightblue colspan=3 align=left>hooks:
  <tr> <th bgcolor=lightblue>&nbsp;
       <td bgcolor=white>
<ul>
  <li> Agent API for special document handling
  <li> Action API for task-specific tag processing
</ul>  
       <th bgcolor=lightblue>&nbsp;
  <tr> <th bgcolor=lightblue colspan=3>&nbsp;
</table>
</slide>


<slide><h2>Tagsets: where it all comes together</h2>
<p>&nbsp;
<table width='90%' border=0 cellspacing=0 align=center>
  <tr> <td colspan=3 align=left>&nbsp;
	It all comes together in <em>tagsets</em> &nbsp;
  <tr> <td bgcolor=lightgreen colspan=3 align=left> &nbsp; Infoware
  <tr> <th bgcolor=lightgreen>&nbsp;
       <td bgcolor=white rowspan=2>
<ul>
  <li> <b>A <em>tagset</em> is a document that defines tag actions</b>
       <ul>
	 <li> Most tags are like macros, implemented in terms of other tags
	 <li> A few are primitives 
       </ul>
  <li> <b><em>the processing of a document depends on the tagset </em></b>
       <ul>
	 <li> The <em>same</em> document can be processed
	 <li> ... with <em>several different</em> tagsets
       </ul>
</ul>

       <th bgcolor=lightblue>&nbsp;
  <tr> <th bgcolor=lightgreen>&nbsp;
       <th bgcolor=lightblue>&nbsp;
  <tr> <td bgcolor=lightblue colspan=3 align=right> Software &nbsp;
  <tr> <td colspan=3 align=right>
	This is where all the magic happens. &nbsp;
</table>
</slide>

<slide><h2>Tags are usually just macros</h2>
<pre><b>&lt;define element=footer empty&gt;
  &lt;doc&gt; This expands into a standard footer, including
	a ``navigation bar''.
	Extract the year modified from the cvs id.
  &lt;/doc&gt;
  &lt;define attribute=cvsid&gt;
    &lt;doc&gt; The CVS id string of the file.
    &lt;/doc&gt;
  &lt;/define&gt;
  &lt;action&gt;
&lt;hr&gt;
&lt;nav-bar/&gt;
&lt;hr&gt;
&lt;set name=myear&gt;&lt;subst match="/.* " result=", "&gt;&lt;extract&gt;
    &amp;attributes;&lt;name&gt;cvsid&lt;eval/&gt;&lt;text split&gt;&amp;list;&lt;/text&gt; 3
    &lt;/extract&gt; &lt;/set&gt;
&lt;b&gt;Copyright &amp;copy; &amp;myear; Ricoh Silicon Valley&lt;/b&gt;&lt;br&gt;
&lt;em&gt;&lt;extract&gt;&amp;attributes;&lt;name&gt;cvsid&lt;eval/&gt;&lt;/extract&gt;&lt;/em&gt;
  &lt;/action&gt;
&lt;/define&gt;
</b></pre>
</slide>

<slide><h2>Or they can be primitives</h2>
<pre><b>
class test_positive extends testHandler {
  public void action(Input in, Context aContext, Output out) {
    String cstring = textContent
      ? Expand.getProcessedTextString(in, aContext)
      : Expand.getProcessedContentString(in, aContext);
    Association a = Association.associateNumeric(null, cstring);
    returnBoolean(a.doubleValue() &gt; 0.0, aContext, out);
  }
  public test_positive(ActiveElement e) {
    super(e, true, true);
  }
  static Action handle(ActiveElement e) {
    return new test_positive(e);
  }
}
</b></pre>
</slide>

<ul>
  <li> This one is implemented in Java;
  <li> ... it is the <em>complete</em> code for a tag that tests whether its
       contents is a positive number.
</ul>

<slide><h2>PIA brings processing to the Web</h2>
<ul>
  <li> PIA defines an <em>extension to HTML</em>
  <li> That represents <strong>processing</strong> on documents
  <li> Without traditional programming
</ul>
</slide>

<hr>
<b>Copyright &copy; 1999 Ricoh Silicon Valley</b><br>
<b>$Id$</b><br>
<address><a href="http://rsv.ricoh.com/~steve/"
         >Stephen R. Savitzky</a> &lt;<a href="mailto:steve@rsv.ricoh.com"
         >steve@rsv.ricoh.com</a>&gt;</address>
</body></html>
