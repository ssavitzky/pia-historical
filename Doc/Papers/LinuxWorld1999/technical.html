<!doctype html public "-//IETF//DTD HTML//EN//2.0">
<html><head>
<title>Technical Details</title>
<link rev="made" href="mailto:steve@rsv.ricoh.com">
</head><body>
<h1>Technical Details</h1>
<include src=config.inc>


<slide><h2>The Problem</h2>
<ul>
  <li> Software and documents are are separate files<br>
       with different languages
  <li> Developing applications requires programming
  <li> Applications and languages change<br>
       documents must be converted or be doomed
</ul>
</slide>

<slide><h2>The Platform</h2>
<table>
  <tr><th> PIA <th align=left> Platform for Information Applications
  <tr><th>&nbsp; <th align=left> A document-processing engine for the web
  <tr><th>&nbsp; <th align=left> Specifies computing with active documents
  <tr><th>&nbsp; <th align=left> Structured as a web site
</table>
</slide>

<slide><h2>What do you want to do?</h2>
<ul>
  <li> <b>Small-office form processing</b>
  <li> <b>Personal productivity applications</b>
  <li> <b>Website management</b>
  <li> <b>E-Commerce</b>
  <li> <b>Intranet Portal</b>
  <li> <b>Development project management</b>
  <li> <b>Document Re-formatting</b>
</ul>
</slide>

<slide><h2>Example: form processing</h2>
<div align=center> <b>Check Approval Form</b>
</div>

<form>
  <table>
   <tr><td align=right>Requestor:  <td><input name=name value="Stephen Savitzky">
   <tr><td align=right>Amount:     <td><input name=amt value="2300">
   <tr><td align=right>Item:       <td><input name=amt width=30 value="Laptop computer">
   <tr><td align=right>Reference:  <td><a href=/forms/PR/1024>PR-1999-02-29-0100</a>
   <tr><td align=right>Name: <td> <input name=name value="Greg Wolff">
   <tr><td align=right>Sign: <td> <input name=pass>
   <tr><td align=right><input type=submit value="Route to">:
       <td> <input name=next value="Peter Hart">
</form>

</slide>


<slide><h2>Things to notice</h2>
<ul>
  <li> <b>Need to get information from other documents</b>
       <ul>
	 <li> Purchase Request form
	 <li> list of employees and managers
	 <li> Routing list
       </ul>
  <li> <b>Some processing is needed</b>
       <ol>
	 <li> To present the form
	 <li> To handle the form
       </ol>
</ul>
</slide>

<slide><h2>Processing</h2>
<ul>
  <li> <b>Assembling the Form</b>
       <ul>
	 <li> Extract basic info from PR (XML)
	 <li> Get full names from <code>/etc/passwd</code> (text)
	 <li> Construct form (HTML)
       </ul>
  <li> <b>Handling the form</b>
       <ul>
	 <li> Verify digital signature
	 <li> Update database
	 <li> Send e-mail to next person in route
	 <li> Construct response page (HTML)
       </ul>
</ul>
<em>That's a lot of PERL code, isn't it?</em>
<ul>
  <li> <b>Normally at least 2 CGI scripts</b>
</ul>
</slide>

<slide><h2>Now how about adding a field?</h2>
<ul>
  <li> <b>Well, first you learn PERL</b>
       <ul>
	 <li> haul out the books
	 <li> study the code
	 <li> <em>what</em> documentation?
       </ul>
  <li> <b>Add field to the HTML</b>
       <ul>
	 <li> oh yeah; that was generated by another CGI...
       </ul>
  <li> <b>Add processing for the new field</b>
</ul>
<em>Our office manager isn't going to like this...</em>
</slide>


<slide><h2>How <em>we</em> do it</h2>
<ul>
  <li> <b>Everything is a document</b>
       <ul>
	 <li> All information is XML --
	      easy to parse and extract
	 <li> All <em>actions</em> are XML --
	      <em>embedded</em> in the form itself
       </ul>
  <li> <b>Processing and document in the same page</b>
       <ul>
	 <li> HTML tags get passed along
	 <li> Action tags get ``expanded''
	 <li> Data comes out of XML documents
       </ul>
  <li> <b>Edit <em>one page</em> using cut-and-paste</b>
</ul>
</slide>

<slide><h2>How does that work?</h2>
<ul>
  <li> <b>Here's how we get the requestor's full name:</b>
       <pre>
       &lt;set name=ruser>&lt;get name=PR:req&gt;&lt;/set&gt;
       &lt;set name=requestor&gt;
            &lt;extract&gt;&lt;from&gt;&amp;USERNAMES;
                   &lt;name&gt;&amp;ruser&lt;/extract&gt; 
       &lt;input name=req value=&amp;requestor;&gt;
       </pre>
       <p>

  <li> <b>Here's how we verify the signature:</b>
       <pre>
	  &lt;if&gt;&lt;verify-signature name=&amp;name; pass=&amp;pass;&gt; 
	    &lt;then&gt; &lt;h2&gt;approved&lt;/h2&gt; 
	            Routed to &amp;FORM:next;.
	             <em>... code to send e-mail, etc. ...</em>
	    &lt;/then&gt; 
	      &nbsp; &lt;else&gt; &lt;h2&gt;Rejected&lt;/h2&gt; 
	      &nbsp; &nbsp; Couldn't verify signature.
	    &lt;/else&gt;
         &lt;/if&gt;
       </pre>
</ul>
</slide>

<slide><h2>Webmaster's Assistant</h2>
<ul>
  <li> <b>Browse to a page</b>
  <li> <b>Extract title, first paragraph</b>
  <li> <b>Get category, keywords from user</b>
  <li> <b>Construct an index entry</b> like this one:
</ul>
<p>
<dl>
  <dt> <a href="http://www.risource.org">pia.rsv.ricoh.com</a>
       PIA -- Platform for Information Applications
  <dd> PIA is a software framework for flexible and dynamic information
       applications. It was created by researchers at Ricoh Silicon
       Valley and makes it possible to create and maintain a new
       generation of customized information processing applications.
       <ul>
	 <li> Entry created 1999-02-25
	 <li> <b>Note: </b> Maybe we could use this...
       </ul>
</dl>
</slide>

<slide><h2>More processing:</h2>
<ul>
  <li> <b>Proxy:</b> Annotate pages while browsing
  <li> <b>Client:</b> fetch referenced pages for processing
  <li> <b>Extract</b> information by tag, position
  <li> <b>Write files</b> in user's home directory
  <li> <b>Fix up</b> relative links
</ul>
</slide>



<slide><h2>Overall Architecture</h2>
<ul>
  <li> <b>InfoWare Layer</b>
       <ul>
	 <li> Active documents
	 <li> For information designers
       </ul>
       <p>

  <li> <b>Software Layer</b>
       <ul>
	 <li> Web server
	 <li> Document processor
       </ul>
  <li> <b>Hooks</b>
       <ul>
	 <li> Agent API for documents
	 <li> Action API for tags
       </ul>
</ul>
</slide>


<slide><h2>Advantages: Software</h2>
<ul>
  <li> <b>Simple</b>
       <ul>
	 <li> main loop is one page of code
	 <li> hooks for special-purpose code
       </ul>
  <li> <b>Highly portable</b>
       <ul>
	 <li> written in Java
	 <li> based on standards: XML, DOM, HTTP ...
	 <li> Linux on Intel, Sun (SPARC), Corel (ARM)
	 <li> Windows, Solaris, ...
       </ul>
  <li> <b>Efficient</b>
       <ul>
	 <li> can save memory in pass-through mode
	 <li> or cache document parse trees for speed
       </ul>
</ul>
</slide>


<slide><h2>Main Loop</h2>
<pre>
  /** Process the current Node */
  public final void processNode() {
    Action handler = input.getAction();
    if (handler != null) {
      handler.action(input, this, output));
    } else {
      copyExpandingChildren(input, this, output);
    }
  }
</pre>
</slide>



<slide><h2>Some of what we've done</h2>
<ul>
  <li> <b>Form processing system</b> <br>
       for all of Ricoh Silicon Valley
  <li> <b>Web browsing history</b><br>
       saves <em>every</em> URL with time and date.<br>
       permanent; browser-independent
  <li> <b>Slide formatter</b> (this one)
  <li> <b>Code documentation</b><br>
       pretty-printing, indexing, etc.
  <li> <b>Web-site management</b><br>
       enforcing look and feel
  <li> <b>Web-enabled appliances</b><br>
       special-purpose servers: photo album, web printer, ...
       
</ul>
</slide>


<slide><h2>What we're doing next</h2>
<ul>
  <li> <b>Port to C</b> speed, portability, embedding
  <li> <b>Integrate with Apache</b> (mod_pia)
  <li> <b>Smart Web Cache</b> + annotation
  <li> <b>Webmaster's Assistant</b>
       (<code><a href="http://www.starport.com">starport.com</a></code>)
</ul>
</slide>


<slide><h2>Cool things to do</h2>
<ul>
  <li> <b>Re-write the PIA in &lt;<em>your favorite language</em>&gt;</b><br>
       Squeak / Perl / Guile / Python / ...
  <li> <b>Integrate with standard XML/SGML parsers</b>
  <li> <b>SGML Style Sheets</b>
  <li> <b>Complete small-office forms package</b>
  <li> <b>Personal finance + portal</b>
  <li> <b>Server administration</b>
  <li> <b>E-commerce package</b>
  <li> <b>Portal development kit</b>
  <li> <b></b>
  <li> <b></b>
  <li> <b></b>
</ul>
<em>This is why we need your help!</em>
</slide>



<hr>
<b>Copyright &copy; 1999 Ricoh Silicon Valley</b><br>
<b>$Id$</b><br>
<address><a href="http://rsv.ricoh.com/~steve/"
         >Stephen R. Savitzky</a> &lt;<a href="mailto:steve@rsv.ricoh.com"
         >steve@rsv.ricoh.com</a>&gt;</address>
</body></html>
