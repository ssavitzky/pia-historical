<!doctype html public "-//IETF//DTD HTML//EN//2.0">
<html><head>
<title>Technical Details</title>
<link rev="made" href="mailto:steve@rsv.ricoh.com">
</head><body>
<h1>Technical Details</h1>
<include src=config.inc>

<slide><h2>Example: form processing</h2>
<div align=center> <b>Check Approval Form</b>
</div>

<form>
  <table>
   <tr><td align=right>Requestor:  <td><input name=name value="Stephen Savitzky">
   <tr><td align=right>Amount:     <td><input name=amt value="2300">
   <tr><td align=right>Item:       <td><input name=amt width=30 value="Laptop computer">
   <tr><td align=right>Reference:  <td><a href=/forms/PR/1024>PR-1999-02-29-0100</a>
   <tr><td align=right>Name: <td> <input name=name value="Greg Wolff">
   <tr><td align=right>Sign: <td> <input name=pass>
   <tr><td align=right><input type=submit value="Route to">:
       <td> <input name=next value="Peter Hart">
</form>

</slide>

<slide><h2>Processing</h2>
<ul>
  <li> <b>Assembling the Form</b>
       <ul>
	 <li> Extract basic info from PR (XML)
	 <li> Get full names from <code>/etc/passwd</code> (text)
	 <li> Construct form (HTML)
       </ul>
  <li> <b>Handling the form</b>
       <ul>
	 <li> Verify digital signature
	 <li> Update database
	 <li> Send e-mail to next person in route
	 <li> Construct response page (HTML)
       </ul>
</ul>
<em>That's a lot of PERL code, isn't it?</em>
<ul>
  <li> <b>Normally at least 2 CGI scripts</b>
</ul>
</slide>

<slide><h2>Now how about adding a field?</h2>

The purchasing agent needs the vendor's name and number:

<form>
  <table>
   <tr><td align=right>Vendor:  <td><input name=vendor value="">
   <tr><td align=right>Phone:   <td><input name=vphone value="">
  </table>
</form>

<em>OK, our office manager knows HTML...</em>

<pre>
   &lt;tr&gt;&lt;td align=right&gt;Vendor:  &lt;td&gt;&lt;input name=vendor&gt;
   &lt;tr&gt;&lt;td align=right&gt;Phone:   &lt;td&gt;&lt;input name=vphone&gt;
</pre>
</slide>

<slide><h2>It's not that simple!</h2>
<ul>
  <li> <b>Add field to the HTML</b>
       <ul>
	 <li> oh yeah; that was generated by a script
       </ul>
  <li> <b>Well, first you learn PERL</b>
       <ul>
	 <li> haul out the books
	 <li> study the code
	 <li> <em>what</em> documentation?
       </ul>
  <li> <b>Add processing for the new field</b>
       <ul>
	 <li> haul out the books again
       </ul>
  <li> <b>Did we mention debugging?</b>
</ul>
<em>Our office manager isn't going to like this...</em>
</slide>


<slide><h2>The Problem</h2>
<em>It all goes back to the nature of documents:</em>
<ul>
  <li> Software and documents are in separate files<br>
      <ul>
	 <li>  with different languages
       </ul>
  <li> Developing applications requires software<br>
       <ul>
	 <li> <em>There's never a programmer around when you need one.</em>
       </ul>
       <p>
</ul>
Also,
<ul>
  <li> Applications and documents change
       <ul>
	 <li> programs must be maintained
	 <li> documents must be updated
	 <li> it's hard to keep them in sync.
       </ul>
</ul>
</slide>

<slide><h2>How <em>we</em> do it</h2>
<ul>
  <li> <b>Everything is a document</b>
       <ul>
	 <li> All information is XML --
	      easy to parse and extract
	 <li> All <em>actions</em> are XML --
	      <em>embedded</em> in the form itself
       </ul>
  <li> <b>A Form describes its own processing</b>
<!-- not clear how to say this === -->
  <li> <b>Edit <em>one page</em> and you're done</b>
</ul>
</slide>

<slide><h2>Here's how we build the form:</h2>
<ul>
  <li> <font color=green>HTML</font> and processing instructions
       <pre>
&lt;set name=vendor>&lt;get name=PR:vendor&gt;&lt;/set&gt;
&lt;set name=vphone&gt;<!-- simplify -->
     &lt;extract&gt;&lt;from&gt;&amp;vendor-list;
            &lt;key&gt;&amp;vendor;
            &lt;name&gt;&amp;phone;&lt;/extract&gt; <font color=green>
&lt;tr&gt;&lt;td align=right&gt;Vendor:
    &lt;td&gt;&lt;input name=vendor value=&amp;vendor;&gt;
&lt;tr&gt;&lt;td align=right&gt;Phone:
    &lt;td&gt;&lt;input name=vphone value=&amp;vphone;&gt;</font>
       </pre>
</ul>
</slide>

<slide><h2>Processing is equally simple:</h2>
<ul><!-- this one has problems -->
       <pre>
&lt;if&gt;&lt;get name=approved&gt; 
   &lt;then&gt; &lt;send-email dst=purchasing&gt;
             &lt;!-- existing code --&gt; <font color=green>
             Vendor: &amp;FORM:vendor;  Phone: &amp;FORM:vphone;.</font>
          &lt;/send-email&gt;
   &lt;/then&gt; 
   &lt;else&gt;<font color=green> &lt;h2&gt;Rejected&lt;/h2&gt; 
          Couldn't verify signature.</font>
   &lt;/else&gt;
&lt;/if&gt;
       </pre>
  <li> but with HTML-like syntax
  <li> All the usual programming constructs
</ul>
</slide>

<!-- there's a missing transition here
 show the form in context; "we call this an agent..."
-->

<slide><h2>The Platform</h2>
<p>&nbsp;
<table width='90%' cellspacing=0 border=0 align=center>
  <tr><th bgcolor="#c40026"> PIA
      <th> Platform for Information Applications
  <tr><th>&nbsp;
      <td>
<table  width='100%'cellspacing=0 border=0>
  <tr> <th bgcolor=lightgreen colspan=3> Infoware Layer
  <tr> <th bgcolor=lightgreen> Agents:
       <td bgcolor=lightgreen> 
	 Collections of active documents 
  <tr>
  <tr> <th bgcolor=lightblue colspan=3> Software Layer
  <tr> <th bgcolor=lightblue>Agency:
       <td bgcolor=lightblue>
	  Web server and Document processor
  <tr>
  <tr> <th bgcolor=lightblue>hooks:
       <td bgcolor=lightblue>
	  Agent and tag API's
</table>
</table>
</slide>


<slide><h2>The Infoware Layer</h2>
<p>&nbsp;
<table width='80%' cellspacing=0 border=0 align=center>
  <tr><th bgcolor="#c40026"> PIA
      <th> Platform for Information Applications
  <tr> <th bgcolor=lightgreen colspan=3> Infoware Layer
  <tr> <th bgcolor=lightgreen colspan=3 align=left> Agents:
  <tr> <th bgcolor=lightgreen>&nbsp;
       <td bgcolor=white>
<ul>
  <li> <b>An application looks like a website</b>
  <li> <b>Each agent looks like a directory</b>
       <ul>
	 <li> everything is done using active documents
       </ul>
  <li> <b>Documents can have embedded action tags</b>
       <ul>
	 <li> <em>everything</em> uses XML syntax.
	 <li> only one language to learn.
       </ul>
</ul>
       <th bgcolor=lightgreen>&nbsp;
  <tr> <th bgcolor=lightgreen colspan=3>&nbsp;
  <tr>
  <tr> <th bgcolor=lightblue colspan=3> Software Layer
</table>
</slide>


<slide><h2>The Software Layer</h2>
<p>&nbsp;
<table width='80%' border=0 cellspacing=0 align=center>
  <tr><th bgcolor="#c40026"> PIA
      <th> Platform for Information Applications
  <tr> <th bgcolor=lightgreen colspan=3> Infoware Layer
  <tr>
  <tr> <th bgcolor=lightblue colspan=3> Software Layer
  <tr> <th bgcolor=lightblue colspan=3 align=left>Agency:
  <tr> <th bgcolor=lightblue>&nbsp;
       <td bgcolor=white>
<ul>
  <li> <b>Document Processor</b>
       <ul>
	 <li> Assigns meaning to &lt;tags&gt;
	 <li> Driven by a <em>tagset</em> document
       </ul>
  <li> <b>Web server</b>
       <ul>
	 <li> Routes requests to appropriate agents
	 <li> Allows agents to modify documents
       </ul>
</ul>
       <th bgcolor=lightblue>&nbsp;
  <tr>
  <tr> <th bgcolor=lightblue colspan=3 align=left>hooks:
  <tr> <th bgcolor=lightblue>&nbsp;
       <td bgcolor=white>
<ul>
  <li> Agent API for documents
  <li> Action API for tags
</ul>  
       <th bgcolor=lightblue>&nbsp;
  <tr> <th bgcolor=lightblue colspan=3>&nbsp;
</table>
</slide>

<slide><h2>Advantages: Software</h2>
<table width='80%' cellspacing=0 border=0 align=center>
  <tr> <th bgcolor=lightgreen colspan=3> Infoware Layer
  <tr>
  <tr> <th bgcolor=lightblue colspan=3> Software Layer
  <tr> <th bgcolor=lightblue>&nbsp;
       <td bgcolor=white>
<ul>
  <li> <b>Simple</b>
       <ul>
	 <li> main loop is one page of code
	 <li> hooks for special-purpose code
       </ul>
  <li> <b>Highly portable</b>
       <ul>
	 <li> written in Java
	 <li> based on standards: XML, DOM, HTTP ...
	 <li> Linux on Intel, Sun (SPARC), Corel (ARM)
	 <li> Windows, Solaris, ...
       </ul>
  <li> <b>Efficient</b>
       <ul>
	 <li> can save memory in pass-through mode
	 <li> or cache document parse trees for speed
       </ul>
  <li> <b>Simple API's</b>
       <ul>
	 <li> application programmers can easily extend
       </ul>
</ul>
       <th bgcolor=lightblue>&nbsp;
  <tr> <th bgcolor=lightblue colspan=3> &nbsp;
</table>
</slide>


<slide><h2>Main Loop</h2>
<pre>
  <font color=red>/** Process the current Node */</font>
  public final void <font color=blue>processNode</font>() {
    Action handler = input.getAction();
    if (handler != null) {
      handler.action(input, this, output));
    } else {
      copyExpandingChildren(input, this, output);
    }
  }
  <font color=red>/** Copy the children of the current Node */</font>
  public final void <font color=blue>copyExpandingChildren</font>() {
    output.startNode(input.getNode());
    for (Node node = input.toFirstChild() ;
	 node != null;
	 node = input.toNextSibling()) {
      processNode();
    }
    output.endNode();    input.toParent();
  }</pre>
</slide>

<!-- another missing transition...
   there's lots of cool stuff in here.  You can use other servers as
   resources.  It's easy to add special-purpose code.  etc...
-->
<hr>
<b>Copyright &copy; 1999 Ricoh Silicon Valley</b><br>
<b>$Id$</b><br>
<address><a href="http://rsv.ricoh.com/~steve/"
         >Stephen R. Savitzky</a> &lt;<a href="mailto:steve@rsv.ricoh.com"
         >steve@rsv.ricoh.com</a>&gt;</address>
</body></html>
